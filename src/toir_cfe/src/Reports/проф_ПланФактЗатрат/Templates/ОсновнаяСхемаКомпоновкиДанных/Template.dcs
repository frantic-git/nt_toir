<?xml version="1.0" encoding="UTF-8"?>
<DataCompositionSchema xmlns="http://v8.1c.ru/8.1/data-composition-system/schema" xmlns:dcscom="http://v8.1c.ru/8.1/data-composition-system/common" xmlns:dcscor="http://v8.1c.ru/8.1/data-composition-system/core" xmlns:dcsset="http://v8.1c.ru/8.1/data-composition-system/settings" xmlns:v8="http://v8.1c.ru/8.1/data/core" xmlns:v8ui="http://v8.1c.ru/8.1/data/ui" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
	<dataSource>
		<name>ИсточникДанных1</name>
		<dataSourceType>Local</dataSourceType>
	</dataSource>
	<dataSet xsi:type="DataSetQuery">
		<name>Иерархия</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>ОбъектИерархии</dataPath>
			<field>ОбъектИерархии</field>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>РодительИерархии</dataPath>
			<field>РодительИерархии</field>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	Документами.ОбъектИерархии КАК ОбъектИерархии,
	Документами.РодительИерархии КАК РодительИерархии
ИЗ
	РегистрСведений.торо_РасположениеОРВСтруктуреИерархии КАК Документами
ГДЕ
	Документами.ОбъектИерархии В(&amp;Элемент)</query>
	</dataSet>
	<dataSet xsi:type="DataSetQuery">
		<name>Контроль</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>РодительКонтроль</dataPath>
			<field>РодительКонтроль</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Родитель контроль</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ЭлементКонтроль</dataPath>
			<field>ЭлементКонтроль</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Элемент контроль</v8:content>
				</v8:item>
			</title>
			<useRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</useRestriction>
			<attributeUseRestriction>
				<field>true</field>
				<condition>true</condition>
				<group>true</group>
				<order>true</order>
			</attributeUseRestriction>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<dataSource>ИсточникДанных1</dataSource>
		<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	Документами.ОбъектИерархии КАК ЭлементКонтроль,
	Документами.РодительИерархии КАК РодительКонтроль
ИЗ
	РегистрСведений.торо_РасположениеОРВСтруктуреИерархии КАК Документами
ГДЕ
	Документами.РодительИерархии В(&amp;Родитель)</query>
	</dataSet>
	<dataSet xsi:type="DataSetUnion">
		<name>НаборДанныхНоменклатура</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВидРемонта</dataPath>
			<field>ВидРемонтаНоменклатура</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Вид ремонта</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Номенклатура</dataPath>
			<field>Номенклатура</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Номенклатура</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>IDРемонта</dataPath>
			<field>IDРемонта</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДокументЗаявка</dataPath>
			<field>ДокументЗаявка</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>РемонтыОборудования_IDНоменклатура</dataPath>
			<field>РемонтыОборудования_IDНоменклатура</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Ремонты оборудования IDНоменклатура</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ОбъектРемонтаНоменклатура</dataPath>
			<field>ОбъектРемонтаНоменклатура</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Объект ремонта</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДокументПлана</dataPath>
			<field>ДокументПлана</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Документ плана</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДатаНачалаПлан</dataPath>
			<field>ДатаНачалаПланНоменклатура</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дата начала план</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ПлановоеКоличествоНоменклатура</dataPath>
			<field>ПлановоеКоличествоНоменклатура</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Плановое количество</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВидЗатрат</dataPath>
			<field>ВидЗатратНоменклатура</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Вид затрат</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ЕдиницаИзмерения</dataPath>
			<field>ЕдиницаИзмеренияНоменклатура</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Единица измерения</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВидДокументаНоменклатура</dataPath>
			<field>ВидДокументаНоменклатура</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Вид документа</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ХарактеристикаНоменклатуры</dataPath>
			<field>Характеристика</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Характеристика номенклатуры</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ОбъектИерархии</dataPath>
			<field>ОбъектИерархии</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Объект иерархии</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
			<inHierarchyDataSet>Контроль</inHierarchyDataSet>
			<inHierarchyDataSetParameter>Родитель</inHierarchyDataSetParameter>
			<inputParameters>
				<dcscor:item>
					<dcscor:parameter>СвязиПараметровВыбора</dcscor:parameter>
					<dcscor:value xsi:type="dcscor:ChoiceParameterLinks">
						<dcscor:item>
							<dcscor:choiceParameter>СтруктураИерархии</dcscor:choiceParameter>
							<dcscor:value>ПараметрыДанных.ИерархияТип</dcscor:value>
							<dcscor:mode xmlns:d8p1="http://v8.1c.ru/8.1/data/enterprise" xsi:type="d8p1:LinkedValueChangeMode">Clear</dcscor:mode>
						</dcscor:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item>
					<dcscor:parameter>СвязьПоТипу</dcscor:parameter>
					<dcscor:value xsi:type="dcscor:TypeLink">
						<dcscor:field>ПараметрыДанных.ИерархияТип</dcscor:field>
					</dcscor:value>
				</dcscor:item>
			</inputParameters>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДатаОкончанияПлан</dataPath>
			<field>ДатаОкончанияПланНоменклатура</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дата окончания план</v8:content>
				</v8:item>
			</title>
		</field>
		<item xsi:type="DataSetQuery">
			<name>НаборДанныхНомен</name>
			<field xsi:type="DataSetFieldField">
				<dataPath>ВидРемонтаНоменклатура</dataPath>
				<field>ВидРемонтаНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Вид ремонта номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Номенклатура</dataPath>
				<field>Номенклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>IDРемонта</dataPath>
				<field>IDРемонта</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДокументЗаявка</dataPath>
				<field>ДокументЗаявка</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>РемонтыОборудования_IDНоменклатура</dataPath>
				<field>РемонтыОборудования_IDНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Ремонты оборудования IDНоменклатура</v8:content>
					</v8:item>
				</title>
				<role>
					<dcscom:dimension>true</dcscom:dimension>
				</role>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ОбъектРемонтаНоменклатура</dataPath>
				<field>ОбъектРемонтаНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Объект ремонта номенклатура</v8:content>
					</v8:item>
				</title>
				<role>
					<dcscom:dimension>true</dcscom:dimension>
				</role>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДокументПлана</dataPath>
				<field>ДокументПлана</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Документ плана</v8:content>
					</v8:item>
				</title>
				<role>
					<dcscom:dimension>true</dcscom:dimension>
				</role>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДатаНачалаПланНоменклатура</dataPath>
				<field>ДатаНачалаПланНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Дата начала план номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ПлановоеКоличествоНоменклатура</dataPath>
				<field>ПлановоеКоличествоНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Плановое количество номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ВидЗатратНоменклатура</dataPath>
				<field>ВидЗатратНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Вид затрат номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ЕдиницаИзмеренияНоменклатура</dataPath>
				<field>ЕдиницаИзмеренияНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Единица измерения номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ВидДокументаНоменклатура</dataPath>
				<field>ВидДокументаНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Вид документа номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Характеристика</dataPath>
				<field>Характеристика</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Характеристика</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ОбъектИерархии</dataPath>
				<field>ОбъектИерархии</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Объект иерархии</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДатаОкончанияПланНоменклатура</dataPath>
				<field>ДатаОкончанияПланНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Дата окончания план номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<dataSource>ИсточникДанных1</dataSource>
			<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	торо_ОбщиеДанныеПоРемонтам.ОбъектРемонта КАК ОбъектРемонта,
	торо_ОбщиеДанныеПоРемонтам.ВидРемонта КАК ВидРемонта,
	торо_ОбщиеДанныеПоРемонтам.IDРемонта КАК ID,
	торо_ОбщиеДанныеПоРемонтам.ЕстьЗаявка КАК ЕстьЗаявка,
	торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки КАК ВидДокументаНачалаЦепочки,
	торо_АктуальныеПлановыеДатыРемонтов.ДокументНачалаЦепочки КАК ДокументВводаРемонта,
	торо_АктуальныеПлановыеДатыРемонтов.ДатаНачала КАК ДатаНачалаПлан,
	торо_АктуальныеПлановыеДатыРемонтов.ДатаОкончания КАК ДатаОкончанияПлан,
	ВЫБОР
		КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ПланГрафикППР)
			ТОГДА "План-график ремонта"
		КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ГрафикРегламентныхМероприятий)
			ТОГДА "Регламентные мероприятия"
		КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ВыявленныйДефект)
			ТОГДА "Выявленные дефекты"
		КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ВнешнееОснованиеДляРабот)
			ТОГДА "Внешние основания"
	КОНЕЦ КАК ВидДокумента,
	торо_АктуальныеПлановыеДатыРемонтов.ДокументНачалаЦепочки КАК ДокументПлана
ПОМЕСТИТЬ ВТ_РемонтыПланВсе
ИЗ
	РегистрСведений.торо_ОбщиеДанныеПоРемонтам КАК торо_ОбщиеДанныеПоРемонтам
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.торо_АктуальныеПлановыеДатыРемонтов КАК торо_АктуальныеПлановыеДатыРемонтов
		ПО торо_ОбщиеДанныеПоРемонтам.IDРемонта = торо_АктуальныеПлановыеДатыРемонтов.IDРемонта
ГДЕ
	ВЫБОР
			КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ВыявленныйДефект)
				ТОГДА &amp;УчитыватьСметыПоДефектам
						И торо_ОбщиеДанныеПоРемонтам.ЕстьЗаявка
			КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ВнешнееОснованиеДляРабот)
				ТОГДА &amp;УчитыватьСметыПоВнешнимОснованиям
						И торо_ОбщиеДанныеПоРемонтам.ЕстьЗаявка
			КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ПланГрафикППР)
				ТОГДА &amp;УчитыватьПланГрафикиППР
			КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ГрафикРегламентныхМероприятий)
				ТОГДА &amp;УчитыватьРегламентныеМероприятия
			ИНАЧЕ ЛОЖЬ
		КОНЕЦ
	И НЕ торо_ОбщиеДанныеПоРемонтам.Отменен
	И НЕ торо_ОбщиеДанныеПоРемонтам.Замещен
{ГДЕ
	(торо_АктуальныеПлановыеДатыРемонтов.ДатаНачала &lt;= &amp;ДатаОкончания
			И торо_АктуальныеПлановыеДатыРемонтов.ДатаОкончания &gt;= &amp;ДатаНачала)}

ИНДЕКСИРОВАТЬ ПО
	ID
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	торо_ЗаявкиПоРемонтамСрезПоследних.IDРемонта КАК IDРемонта,
	торо_ЗаявкиПоРемонтамСрезПоследних.ДокументЗаявка КАК ДокументЗаявка
ПОМЕСТИТЬ ВТ_Заявки
ИЗ
	РегистрСведений.торо_ЗаявкиПоРемонтам.СрезПоследних(
			,
			IDРемонта В
				(ВЫБРАТЬ
					ВТ_РемонтыПланВсе.ID
				ИЗ
					ВТ_РемонтыПланВсе КАК ВТ_РемонтыПланВсе)) КАК торо_ЗаявкиПоРемонтамСрезПоследних
ГДЕ
	НЕ торо_ЗаявкиПоРемонтамСрезПоследних.Отменен

ИНДЕКСИРОВАТЬ ПО
	IDРемонта
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_РемонтыПланВсе.ОбъектРемонта КАК ОбъектРемонта,
	ВТ_РемонтыПланВсе.ВидРемонта КАК ВидРемонта,
	ВТ_РемонтыПланВсе.ID КАК ID,
	ВТ_РемонтыПланВсе.ЕстьЗаявка КАК ЕстьЗаявка,
	ВТ_РемонтыПланВсе.ВидДокументаНачалаЦепочки КАК ВидДокументаНачалаЦепочки,
	ВТ_РемонтыПланВсе.ДокументВводаРемонта КАК ДокументВводаРемонта,
	ВТ_РемонтыПланВсе.ДатаНачалаПлан КАК ДатаНачалаПлан,
	ВТ_РемонтыПланВсе.ДатаОкончанияПлан КАК ДатаОкончанияПлан,
	ВТ_РемонтыПланВсе.ВидДокумента КАК ВидДокумента,
	ЕСТЬNULL(ВТ_Заявки.ДокументЗаявка, ВТ_РемонтыПланВсе.ДокументПлана) КАК ДокументПлана
ПОМЕСТИТЬ ВТ_РемонтыПлан
ИЗ
	ВТ_РемонтыПланВсе КАК ВТ_РемонтыПланВсе
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_Заявки КАК ВТ_Заявки
		ПО ВТ_РемонтыПланВсе.ID = ВТ_Заявки.IDРемонта

ИНДЕКСИРОВАТЬ ПО
	ID,
	ДокументПлана
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВТ_РемонтыПлан.ОбъектРемонта КАК ОбъектРемонта,
	ВТ_РемонтыПлан.ВидРемонта КАК ВидРемонта,
	ВТ_РемонтыПлан.ID КАК ID,
	ВТ_РемонтыПлан.ДокументВводаРемонта КАК ДокументВводаРемонта,
	торо_ПлановыеМатериальныеЗатратыРемонтныхРабот.Номенклатура КАК Номенклатура,
	СУММА(торо_ПлановыеМатериальныеЗатратыРемонтныхРабот.Количество) КАК КоличествоПлан,
	ВТ_РемонтыПлан.ДокументПлана КАК ДокументПлана,
	"Материальные затраты" КАК ВидЗатрат,
	торо_ПлановыеМатериальныеЗатратыРемонтныхРабот.ХарактеристикаНоменклатуры КАК Характеристика
ПОМЕСТИТЬ ПлановыеЗатраты
ИЗ
	ВТ_РемонтыПлан КАК ВТ_РемонтыПлан
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрНакопления.торо_ПлановыеМатериальныеЗатратыРемонтныхРабот КАК торо_ПлановыеМатериальныеЗатратыРемонтныхРабот
		ПО ВТ_РемонтыПлан.ID = торо_ПлановыеМатериальныеЗатратыРемонтныхРабот.РемонтыОборудования_ID
			И ВТ_РемонтыПлан.ДокументПлана = торо_ПлановыеМатериальныеЗатратыРемонтныхРабот.Регистратор

СГРУППИРОВАТЬ ПО
	ВТ_РемонтыПлан.ОбъектРемонта,
	ВТ_РемонтыПлан.ВидРемонта,
	ВТ_РемонтыПлан.ID,
	ВТ_РемонтыПлан.ДокументВводаРемонта,
	торо_ПлановыеМатериальныеЗатратыРемонтныхРабот.Номенклатура,
	ВТ_РемонтыПлан.ДокументПлана,
	торо_ПлановыеМатериальныеЗатратыРемонтныхРабот.ХарактеристикаНоменклатуры

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ВТ_РемонтыПлан.ОбъектРемонта,
	ВТ_РемонтыПлан.ВидРемонта,
	ВТ_РемонтыПлан.ID,
	ВТ_РемонтыПлан.ДокументВводаРемонта,
	торо_ПроектныеЗатратыНаРемонтыМатериальныеЗатраты.Номенклатура,
	СУММА(торо_ПроектныеЗатратыНаРемонтыМатериальныеЗатраты.Количество),
	ВТ_РемонтыПлан.ДокументПлана,
	"Материальные затраты",
	торо_ПроектныеЗатратыНаРемонтыМатериальныеЗатраты.ХарактеристикаНоменклатуры
ИЗ
	ВТ_РемонтыПлан КАК ВТ_РемонтыПлан
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.торо_ПроектныеЗатратыНаРемонты.МатериальныеЗатраты КАК торо_ПроектныеЗатратыНаРемонтыМатериальныеЗатраты
		ПО ВТ_РемонтыПлан.ID = торо_ПроектныеЗатратыНаРемонтыМатериальныеЗатраты.Ссылка.IDРемонта
			И (НЕ ВТ_РемонтыПлан.ЕстьЗаявка)
			И (НЕ торо_ПроектныеЗатратыНаРемонтыМатериальныеЗатраты.Ссылка.ПометкаУдаления)

СГРУППИРОВАТЬ ПО
	ВТ_РемонтыПлан.ОбъектРемонта,
	ВТ_РемонтыПлан.ВидРемонта,
	ВТ_РемонтыПлан.ID,
	ВТ_РемонтыПлан.ДокументВводаРемонта,
	торо_ПроектныеЗатратыНаРемонтыМатериальныеЗатраты.Номенклатура,
	ВТ_РемонтыПлан.ДокументПлана,
	торо_ПроектныеЗатратыНаРемонтыМатериальныеЗатраты.ХарактеристикаНоменклатуры

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ВТ_РемонтыПлан.ОбъектРемонта,
	ВТ_РемонтыПлан.ВидРемонта,
	ВТ_РемонтыПлан.ID,
	ВТ_РемонтыПлан.ДокументВводаРемонта,
	торо_ПлановыеЗатратыЗапчастей.Номенклатура,
	СУММА(торо_ПлановыеЗатратыЗапчастей.Количество),
	ВТ_РемонтыПлан.ДокументПлана,
	"Затраты запчастей",
	торо_ПлановыеЗатратыЗапчастей.ХарактеристикаНоменклатуры
ИЗ
	ВТ_РемонтыПлан КАК ВТ_РемонтыПлан
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрНакопления.торо_ПлановыеЗатратыЗапчастей КАК торо_ПлановыеЗатратыЗапчастей
		ПО ВТ_РемонтыПлан.ID = торо_ПлановыеЗатратыЗапчастей.РемонтыОборудования_ID
			И ВТ_РемонтыПлан.ДокументПлана = торо_ПлановыеЗатратыЗапчастей.Регистратор

СГРУППИРОВАТЬ ПО
	ВТ_РемонтыПлан.ОбъектРемонта,
	ВТ_РемонтыПлан.ВидРемонта,
	ВТ_РемонтыПлан.ID,
	ВТ_РемонтыПлан.ДокументВводаРемонта,
	торо_ПлановыеЗатратыЗапчастей.Номенклатура,
	ВТ_РемонтыПлан.ДокументПлана,
	торо_ПлановыеЗатратыЗапчастей.ХарактеристикаНоменклатуры

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ РАЗЛИЧНЫЕ
	ВТ_РемонтыПлан.ОбъектРемонта,
	ВТ_РемонтыПлан.ВидРемонта,
	ВТ_РемонтыПлан.ID,
	ВТ_РемонтыПлан.ДокументВводаРемонта,
	торо_ПроектныеЗатратыНаРемонтыЗапчасти.Номенклатура,
	СУММА(торо_ПроектныеЗатратыНаРемонтыЗапчасти.Количество),
	ВТ_РемонтыПлан.ДокументПлана,
	"Затраты запчастей",
	торо_ПроектныеЗатратыНаРемонтыЗапчасти.ХарактеристикаНоменклатуры
ИЗ
	ВТ_РемонтыПлан КАК ВТ_РемонтыПлан
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.торо_ПроектныеЗатратыНаРемонты.Запчасти КАК торо_ПроектныеЗатратыНаРемонтыЗапчасти
		ПО ВТ_РемонтыПлан.ID = торо_ПроектныеЗатратыНаРемонтыЗапчасти.Ссылка.IDРемонта
			И (НЕ ВТ_РемонтыПлан.ЕстьЗаявка)
			И (НЕ торо_ПроектныеЗатратыНаРемонтыЗапчасти.Ссылка.ПометкаУдаления)

СГРУППИРОВАТЬ ПО
	ВТ_РемонтыПлан.ОбъектРемонта,
	ВТ_РемонтыПлан.ВидРемонта,
	ВТ_РемонтыПлан.ID,
	ВТ_РемонтыПлан.ДокументВводаРемонта,
	торо_ПроектныеЗатратыНаРемонтыЗапчасти.Номенклатура,
	ВТ_РемонтыПлан.ДокументПлана,
	торо_ПроектныеЗатратыНаРемонтыЗапчасти.ХарактеристикаНоменклатуры

ИНДЕКСИРОВАТЬ ПО
	ID,
	Номенклатура,
	ОбъектРемонта,
	ДокументПлана
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ РАЗЛИЧНЫЕ
	ВТ_РемонтыПлан.ОбъектРемонта КАК ОбъектРемонта,
	ВТ_РемонтыПлан.ВидРемонта КАК ВидРемонта,
	ВТ_РемонтыПлан.ID КАК ID,
	ВТ_РемонтыПлан.ДокументПлана КАК ДокументПлана,
	торо_ФактическиеМатериальныеЗатратыРемонтныхРабот.Номенклатура КАК Номенклатура,
	"Материальные затраты" КАК ВидЗатрат,
	торо_ФактическиеМатериальныеЗатратыРемонтныхРабот.ХарактеристикаНоменклатуры КАК Характеристика
ПОМЕСТИТЬ ФактическиеЗатраты
ИЗ
	ВТ_РемонтыПлан КАК ВТ_РемонтыПлан
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрНакопления.торо_ФактическиеМатериальныеЗатратыРемонтныхРабот КАК торо_ФактическиеМатериальныеЗатратыРемонтныхРабот
		ПО ВТ_РемонтыПлан.ID = торо_ФактическиеМатериальныеЗатратыРемонтныхРабот.РемонтыОборудования_ID

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ РАЗЛИЧНЫЕ
	ВТ_РемонтыПлан.ОбъектРемонта,
	ВТ_РемонтыПлан.ВидРемонта,
	ВТ_РемонтыПлан.ID,
	ВТ_РемонтыПлан.ДокументПлана,
	торо_ФактическиеЗатратыЗапчастей.Номенклатура,
	"Затраты запчастей",
	торо_ФактическиеЗатратыЗапчастей.ХарактеристикаНоменклатуры
ИЗ
	ВТ_РемонтыПлан КАК ВТ_РемонтыПлан
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрНакопления.торо_ФактическиеЗатратыЗапчастей КАК торо_ФактическиеЗатратыЗапчастей
		ПО ВТ_РемонтыПлан.ID = торо_ФактическиеЗатратыЗапчастей.РемонтыОборудования_ID

ИНДЕКСИРОВАТЬ ПО
	ID,
	Номенклатура,
	ОбъектРемонта,
	ДокументПлана
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗЛИЧНЫЕ
	ВТ_РемонтыПлан.ID КАК РЕмонтыОборудования_ID,
	ВТ_РемонтыПлан.ДокументВводаРемонта КАК ДокументВводаРемонта,
	ЕСТЬNULL(ПлановыеЗатраты.Номенклатура, ФактическиеЗатраты.Номенклатура) КАК Номенклатура,
	ЕСТЬNULL(ПлановыеЗатраты.КоличествоПлан, 0) КАК ПлановоеКоличество,
	ЕСТЬNULL(ЕСТЬNULL(ПлановыеЗатраты.ДокументПлана, ФактическиеЗатраты.ДокументПлана), ВТ_РемонтыПлан.ДокументВводаРемонта) КАК ДокументПлана,
	ВЫБОР
		КОГДА ПлановыеЗатраты.ДокументПлана ЕСТЬ NULL
			ТОГДА ВТ_РемонтыПлан.ДокументВводаРемонта.Дата
		ИНАЧЕ ПлановыеЗатраты.ДокументПлана.Дата
	КОНЕЦ КАК ПлановыйПериод,
	ЕСТЬNULL(ПлановыеЗатраты.ВидЗатрат, ФактическиеЗатраты.ВидЗатрат) КАК ВидЗатрат,
	ВТ_РемонтыПлан.ОбъектРемонта КАК ОбъектРемонта,
	ВТ_РемонтыПлан.ВидРемонта КАК ВидРемонта,
	ВТ_РемонтыПлан.ДатаНачалаПлан КАК ДатаНачалаПлан,
	ВТ_РемонтыПлан.ДатаОкончанияПлан КАК ДатаОкончанияПлан,
	ВТ_РемонтыПлан.ВидДокумента КАК ВидДокумента,
	ЕСТЬNULL(ПлановыеЗатраты.Характеристика, ФактическиеЗатраты.Характеристика) КАК Характеристика
ПОМЕСТИТЬ ЗатратыПланФакт
ИЗ
	ВТ_РемонтыПлан КАК ВТ_РемонтыПлан
		ЛЕВОЕ СОЕДИНЕНИЕ ПлановыеЗатраты КАК ПлановыеЗатраты
			ПОЛНОЕ СОЕДИНЕНИЕ ФактическиеЗатраты КАК ФактическиеЗатраты
			ПО ПлановыеЗатраты.ID = ФактическиеЗатраты.ID
				И ПлановыеЗатраты.Номенклатура = ФактическиеЗатраты.Номенклатура
				И ПлановыеЗатраты.Характеристика = ФактическиеЗатраты.Характеристика
				И ПлановыеЗатраты.ВидЗатрат = ФактическиеЗатраты.ВидЗатрат
				И ПлановыеЗатраты.ОбъектРемонта = ФактическиеЗатраты.ОбъектРемонта
				И ПлановыеЗатраты.ДокументПлана = ФактическиеЗатраты.ДокументПлана
		ПО (ЕСТЬNULL(ПлановыеЗатраты.ID, ФактическиеЗатраты.ID) = ВТ_РемонтыПлан.ID)
			И (ЕСТЬNULL(ПлановыеЗатраты.ДокументПлана, ФактическиеЗатраты.ДокументПлана) = ВТ_РемонтыПлан.ДокументПлана)
ГДЕ
	НЕ ЕСТЬNULL(ПлановыеЗатраты.Номенклатура, ФактическиеЗатраты.Номенклатура) ЕСТЬ NULL

ИНДЕКСИРОВАТЬ ПО
	Номенклатура,
	Характеристика,
	ОбъектРемонта
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ЗатратыПланФакт.Номенклатура КАК Номенклатура,
	ЗатратыПланФакт.РЕмонтыОборудования_ID КАК РемонтыОборудования_IDНоменклатура,
	ЕСТЬNULL(торо_МаршрутыРегламентныхМероприятий.ОбъектРемонта, ЗатратыПланФакт.ОбъектРемонта) КАК ОбъектРемонтаНоменклатура,
	ЗатратыПланФакт.ВидРемонта КАК ВидРемонтаНоменклатура,
	ЗатратыПланФакт.ДокументПлана КАК ДокументПлана,
	МАКСИМУМ(ЗатратыПланФакт.ДатаНачалаПлан) КАК ДатаНачалаПланНоменклатура,
	МАКСИМУМ(ЗатратыПланФакт.ДатаОкончанияПлан) КАК ДатаОкончанияПланНоменклатура,
	СУММА(ЗатратыПланФакт.ПлановоеКоличество) КАК ПлановоеКоличествоНоменклатура,
	ЗатратыПланФакт.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмеренияНоменклатура,
	ЗатратыПланФакт.ВидЗатрат КАК ВидЗатратНоменклатура,
	ЗатратыПланФакт.ВидДокумента КАК ВидДокументаНоменклатура,
	ЗатратыПланФакт.Характеристика КАК Характеристика
ПОМЕСТИТЬ ЗатратыБезУчетаВалюты
ИЗ
	ЗатратыПланФакт КАК ЗатратыПланФакт
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.торо_МаршрутыРегламентныхМероприятий КАК торо_МаршрутыРегламентныхМероприятий
		ПО ЗатратыПланФакт.ОбъектРемонта = торо_МаршрутыРегламентныхМероприятий.СписокОбъектов

СГРУППИРОВАТЬ ПО
	ЗатратыПланФакт.Номенклатура,
	ЗатратыПланФакт.РЕмонтыОборудования_ID,
	ЕСТЬNULL(торо_МаршрутыРегламентныхМероприятий.ОбъектРемонта, ЗатратыПланФакт.ОбъектРемонта),
	ЗатратыПланФакт.ВидРемонта,
	ЗатратыПланФакт.ДокументПлана,
	ЗатратыПланФакт.Номенклатура.ЕдиницаИзмерения,
	ЗатратыПланФакт.ВидЗатрат,
	ЗатратыПланФакт.ВидДокумента,
	ЗатратыПланФакт.Характеристика

ИНДЕКСИРОВАТЬ ПО
	Номенклатура,
	РемонтыОборудования_IDНоменклатура,
	ОбъектРемонтаНоменклатура
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ЗатратыБезУчетаВалюты.Номенклатура КАК Номенклатура,
	ЗатратыБезУчетаВалюты.РемонтыОборудования_IDНоменклатура КАК РемонтыОборудования_IDНоменклатура,
	ЗатратыБезУчетаВалюты.ОбъектРемонтаНоменклатура КАК ОбъектРемонтаНоменклатура,
	ЗатратыБезУчетаВалюты.ВидРемонтаНоменклатура КАК ВидРемонтаНоменклатура,
	ЗатратыБезУчетаВалюты.ДокументПлана КАК ДокументПлана,
	ЗатратыБезУчетаВалюты.ДатаНачалаПланНоменклатура КАК ДатаНачалаПланНоменклатура,
	ЗатратыБезУчетаВалюты.ДатаОкончанияПланНоменклатура КАК ДатаОкончанияПланНоменклатура,
	ЗатратыБезУчетаВалюты.ПлановоеКоличествоНоменклатура КАК ПлановоеКоличествоНоменклатура,
	ЗатратыБезУчетаВалюты.ЕдиницаИзмеренияНоменклатура КАК ЕдиницаИзмеренияНоменклатура,
	ЗатратыБезУчетаВалюты.ВидЗатратНоменклатура КАК ВидЗатратНоменклатура,
	ЗатратыБезУчетаВалюты.ВидДокументаНоменклатура КАК ВидДокументаНоменклатура,
	ЗатратыБезУчетаВалюты.Характеристика КАК Характеристика
ПОМЕСТИТЬ СНулевымиЗначениями
ИЗ
	ЗатратыБезУчетаВалюты КАК ЗатратыБезУчетаВалюты
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.торо_ОбъектыРемонта КАК торо_ОбъектыРемонта
		ПО ЗатратыБезУчетаВалюты.ОбъектРемонтаНоменклатура = торо_ОбъектыРемонта.Ссылка
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	СНулевымиЗначениями.Номенклатура КАК Номенклатура,
	СНулевымиЗначениями.РемонтыОборудования_IDНоменклатура КАК РемонтыОборудования_IDНоменклатура,
	СНулевымиЗначениями.ОбъектРемонтаНоменклатура КАК ОбъектРемонтаНоменклатура,
	СНулевымиЗначениями.ВидРемонтаНоменклатура КАК ВидРемонтаНоменклатура,
	СНулевымиЗначениями.ДокументПлана КАК ДокументПлана,
	СНулевымиЗначениями.ДатаНачалаПланНоменклатура КАК ДатаНачалаПланНоменклатура,      
	СНулевымиЗначениями.ДатаОкончанияПланНоменклатура КАК ДатаОкончанияПланНоменклатура,
	СНулевымиЗначениями.ПлановоеКоличествоНоменклатура КАК ПлановоеКоличествоНоменклатура,
	СНулевымиЗначениями.ЕдиницаИзмеренияНоменклатура КАК ЕдиницаИзмеренияНоменклатура,
	СНулевымиЗначениями.ВидЗатратНоменклатура КАК ВидЗатратНоменклатура,
	СНулевымиЗначениями.ВидДокументаНоменклатура КАК ВидДокументаНоменклатура,
	СНулевымиЗначениями.Характеристика КАК Характеристика,
	&amp;ПолеОбъектИерархии КАК ОбъектИерархии
ИЗ
	СНулевымиЗначениями КАК СНулевымиЗначениями</query>
		</item>
		<item xsi:type="DataSetQuery">
			<name>НаборДанныхКвалиф</name>
			<field xsi:type="DataSetFieldField">
				<dataPath>IDРемонта</dataPath>
				<field>IDРемонта</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДокументЗаявка</dataPath>
				<field>ДокументЗаявка</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ОбъектИерархии</dataPath>
				<field>ОбъектИерархии</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Объект иерархии</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ВидРемонтаНоменклатура</dataPath>
				<field>ВидРемонтаНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Вид ремонта номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Номенклатура</dataPath>
				<field>Номенклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>РемонтыОборудования_IDНоменклатура</dataPath>
				<field>РемонтыОборудования_IDНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Ремонты оборудования IDНоменклатура</v8:content>
					</v8:item>
				</title>
				<role>
					<dcscom:dimension>true</dcscom:dimension>
				</role>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДатаНачалаПланНоменклатура</dataPath>
				<field>ДатаНачалаПланНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Дата начала план номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ОбъектРемонтаНоменклатура</dataPath>
				<field>ОбъектРемонтаНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Объект ремонта номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДатаОкончанияПланНоменклатура</dataPath>
				<field>ДатаОкончанияПланНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Дата окончания план номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДокументПлана</dataPath>
				<field>ДокументПлана</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Документ плана</v8:content>
					</v8:item>
				</title>
				<role>
					<dcscom:dimension>true</dcscom:dimension>
				</role>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ВидДокументаНоменклатура</dataPath>
				<field>ВидДокументаНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Вид документа номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ПлановоеКоличествоНоменклатура</dataPath>
				<field>ПлановоеКоличествоНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Плановое количество номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ВидЗатратНоменклатура</dataPath>
				<field>ВидЗатратНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Вид затрат номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<dataSource>ИсточникДанных1</dataSource>
			<query>   ВЫБРАТЬ РАЗРЕШЕННЫЕ      
    торо_ОбщиеДанныеПоРемонтам.ОбъектРемонта КАК ОбъектРемонта,
	торо_ОбщиеДанныеПоРемонтам.ВидРемонта КАК ВидРемонта,
	торо_ОбщиеДанныеПоРемонтам.IDРемонта КАК РемонтыОборудования_ID,
	торо_ОбщиеДанныеПоРемонтам.ЕстьЗаявка КАК ЕстьЗаявка,
	торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки КАК ВидДокументаНачалаЦепочки,
	торо_АктуальныеПлановыеДатыРемонтов.ДокументНачалаЦепочки КАК ДокументВводаРемонта,
	торо_АктуальныеПлановыеДатыРемонтов.ДатаНачала КАК ДатаНачалаПлан,
	торо_АктуальныеПлановыеДатыРемонтов.ДатаОкончания КАК ДатаОкончанияПлан,
	ВЫБОР
		КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ПланГрафикППР)
			ТОГДА "План-график ремонта"
		КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ГрафикРегламентныхМероприятий)
			ТОГДА "Регламентные мероприятия"
		КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ВыявленныйДефект)
			ТОГДА "Выявленные дефекты"
		КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ВнешнееОснованиеДляРабот)
			ТОГДА "Внешние основания"
	КОНЕЦ КАК ВидДокумента,
	торо_АктуальныеПлановыеДатыРемонтов.ДокументНачалаЦепочки КАК ДокументПлана
ПОМЕСТИТЬ ВТ_РемонтыПланВсе
ИЗ
	РегистрСведений.торо_ОбщиеДанныеПоРемонтам КАК торо_ОбщиеДанныеПоРемонтам
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.торо_АктуальныеПлановыеДатыРемонтов КАК торо_АктуальныеПлановыеДатыРемонтов
		ПО торо_ОбщиеДанныеПоРемонтам.IDРемонта = торо_АктуальныеПлановыеДатыРемонтов.IDРемонта
ГДЕ
	ВЫБОР
			КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ВыявленныйДефект)
				ТОГДА &amp;УчитыватьСметыПоДефектам
						И торо_ОбщиеДанныеПоРемонтам.ЕстьЗаявка
			КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ВнешнееОснованиеДляРабот)
				ТОГДА &amp;УчитыватьСметыПоВнешнимОснованиям
						И торо_ОбщиеДанныеПоРемонтам.ЕстьЗаявка
			КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ПланГрафикППР)
				ТОГДА &amp;УчитыватьПланГрафикиППР
			КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ГрафикРегламентныхМероприятий)
				ТОГДА &amp;УчитыватьРегламентныеМероприятия
			ИНАЧЕ ЛОЖЬ
		КОНЕЦ
	И НЕ торо_ОбщиеДанныеПоРемонтам.Отменен
	И НЕ торо_ОбщиеДанныеПоРемонтам.Замещен
{ГДЕ
	(торо_АктуальныеПлановыеДатыРемонтов.ДатаНачала &lt;= &amp;ДатаОкончания
			И торо_АктуальныеПлановыеДатыРемонтов.ДатаНачала &gt;= &amp;ДатаНачала)}

ИНДЕКСИРОВАТЬ ПО
	РемонтыОборудования_ID
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	торо_ЗаявкиПоРемонтамСрезПоследних.IDРемонта КАК РемонтыОборудования_ID,
	торо_ЗаявкиПоРемонтамСрезПоследних.ДокументЗаявка КАК ДокументЗаявка
ПОМЕСТИТЬ ВТ_Заявки
ИЗ
	РегистрСведений.торо_ЗаявкиПоРемонтам.СрезПоследних(
			,
			IDРемонта В
				(ВЫБРАТЬ
					ВТ_РемонтыПланВсе.РемонтыОборудования_ID
				ИЗ
					ВТ_РемонтыПланВсе КАК ВТ_РемонтыПланВсе)) КАК торо_ЗаявкиПоРемонтамСрезПоследних
ГДЕ
	НЕ торо_ЗаявкиПоРемонтамСрезПоследних.Отменен

ИНДЕКСИРОВАТЬ ПО
	РемонтыОборудования_ID
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ   
	ВТ_РемонтыПланВсе.ОбъектРемонта КАК ОбъектРемонта,
	ВТ_РемонтыПланВсе.ВидРемонта КАК ВидРемонта,
	ВТ_РемонтыПланВсе.РемонтыОборудования_ID КАК РемонтыОборудования_ID,
	ВТ_РемонтыПланВсе.ЕстьЗаявка КАК ЕстьЗаявка,
	ВТ_РемонтыПланВсе.ВидДокументаНачалаЦепочки КАК ВидДокументаНачалаЦепочки,
	ВТ_РемонтыПланВсе.ДокументВводаРемонта КАК ДокументВводаРемонта,
	ВТ_РемонтыПланВсе.ДатаНачалаПлан КАК ДатаНачалаПлан,
	ВТ_РемонтыПланВсе.ДатаОкончанияПлан КАК ДатаОкончанияПлан,
	ВТ_РемонтыПланВсе.ВидДокумента КАК ВидДокумента,
	ЕСТЬNULL(ВТ_Заявки.ДокументЗаявка, ВТ_РемонтыПланВсе.ДокументПлана) КАК ДокументПлана
ПОМЕСТИТЬ ВТ_РемонтыПлан
ИЗ
	ВТ_РемонтыПланВсе КАК ВТ_РемонтыПланВсе
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_Заявки КАК ВТ_Заявки
		ПО ВТ_РемонтыПланВсе.РемонтыОборудования_ID = ВТ_Заявки.РемонтыОборудования_ID

ИНДЕКСИРОВАТЬ ПО
	РемонтыОборудования_ID,
	ДокументПлана
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВТ_РемонтыПлан.РемонтыОборудования_ID КАК РемонтыОборудования_ID,
	ВТ_РемонтыПлан.ОбъектРемонта КАК ОбъектРемонта,
	ВТ_РемонтыПлан.ВидРемонта КАК ВидРемонта,
	ВТ_РемонтыПлан.ДатаНачалаПлан КАК ДатаНачалаПлан,
	ВТ_РемонтыПлан.ДатаОкончанияПлан КАК ДатаОкончанияПлан,
	ВТ_РемонтыПлан.ДокументПлана КАК ДокументПлана,  
	"Квалификация" КАК ВидЗатрат,
	ВТ_РемонтыПлан.ВидДокумента КАК ВидДокумента,
	торо_ПлановыеТрудовыеЗатратыРемонтныхРабот.РемонтнаяРабота КАК РемонтнаяРабота,
	торо_ПлановыеТрудовыеЗатратыРемонтныхРабот.ID КАК РемонтнаяРабота_ID,
	торо_ПлановыеТрудовыеЗатратыРемонтныхРабот.Квалификация КАК Квалификация,
	СУММА(торо_ПлановыеТрудовыеЗатратыРемонтныхРабот.Количество) КАК КоличествоПлан
	 
ПОМЕСТИТЬ ПлановыеЗатраты
ИЗ
	ВТ_РемонтыПлан КАК ВТ_РемонтыПлан
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрНакопления.торо_ПлановыеТрудовыеЗатратыРемонтныхРабот КАК торо_ПлановыеТрудовыеЗатратыРемонтныхРабот
		ПО ВТ_РемонтыПлан.РемонтыОборудования_ID = торо_ПлановыеТрудовыеЗатратыРемонтныхРабот.РемонтыОборудования_ID
			И ВТ_РемонтыПлан.ДокументПлана = торо_ПлановыеТрудовыеЗатратыРемонтныхРабот.Регистратор

СГРУППИРОВАТЬ ПО
	ВТ_РемонтыПлан.ОбъектРемонта,
	ВТ_РемонтыПлан.ДатаНачалаПлан,
	ВТ_РемонтыПлан.ДатаОкончанияПлан,
	ВТ_РемонтыПлан.ВидРемонта,
	торо_ПлановыеТрудовыеЗатратыРемонтныхРабот.Квалификация,
	торо_ПлановыеТрудовыеЗатратыРемонтныхРабот.ID,
	ВТ_РемонтыПлан.РемонтыОборудования_ID,
	ВТ_РемонтыПлан.ДокументПлана,
	ВТ_РемонтыПлан.ВидДокумента,
	торо_ПлановыеТрудовыеЗатратыРемонтныхРабот.РемонтнаяРабота

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ 
	ВТ_РемонтыПлан.РемонтыОборудования_ID КАК РемонтыОборудования_ID,
	ВТ_РемонтыПлан.ОбъектРемонта КАК ОбъектРемонта,
	ВТ_РемонтыПлан.ВидРемонта КАК ВидРемонта,
	ВТ_РемонтыПлан.ДатаНачалаПлан КАК ДатаНачалаПлан,
	ВТ_РемонтыПлан.ДатаОкончанияПлан КАК ДатаОкончанияПлан,
	ВТ_РемонтыПлан.ДокументПлана КАК ДокументПлана,  
	"Квалификация" КАК ВидЗатрат,
	ВТ_РемонтыПлан.ВидДокумента КАК ВидДокумента,
	торо_ПроектныеЗатратыНаРемонтыРемонтныеРаботы.РемонтнаяРабота КАК РемонтнаяРабота,
	торо_ПроектныеЗатратыНаРемонтыТрудовыеЗатраты.ID КАК РемонтнаяРабота_ID,
	торо_ПроектныеЗатратыНаРемонтыТрудовыеЗатраты.Квалификация КАК Квалификация,
	СУММА(торо_ПроектныеЗатратыНаРемонтыТрудовыеЗатраты.Количество) КАК КоличествоПлан
ИЗ
	ВТ_РемонтыПлан КАК ВТ_РемонтыПлан
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.торо_ПроектныеЗатратыНаРемонты.ТрудовыеЗатраты КАК торо_ПроектныеЗатратыНаРемонтыТрудовыеЗатраты
			ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.торо_ПроектныеЗатратыНаРемонты.РемонтныеРаботы КАК торо_ПроектныеЗатратыНаРемонтыРемонтныеРаботы
			ПО торо_ПроектныеЗатратыНаРемонтыТрудовыеЗатраты.Ссылка = торо_ПроектныеЗатратыНаРемонтыРемонтныеРаботы.Ссылка
				И торо_ПроектныеЗатратыНаРемонтыТрудовыеЗатраты.ID = торо_ПроектныеЗатратыНаРемонтыРемонтныеРаботы.ID
		ПО ВТ_РемонтыПлан.РемонтыОборудования_ID = торо_ПроектныеЗатратыНаРемонтыТрудовыеЗатраты.Ссылка.IDРемонта
			И (НЕ ВТ_РемонтыПлан.ЕстьЗаявка)
			И (НЕ торо_ПроектныеЗатратыНаРемонтыТрудовыеЗатраты.Ссылка.ПометкаУдаления)

СГРУППИРОВАТЬ ПО
	ВТ_РемонтыПлан.ОбъектРемонта,
	ВТ_РемонтыПлан.ДатаНачалаПлан,
	ВТ_РемонтыПлан.ДатаОкончанияПлан,
	ВТ_РемонтыПлан.ВидРемонта,
	торо_ПроектныеЗатратыНаРемонтыТрудовыеЗатраты.Квалификация,
	торо_ПроектныеЗатратыНаРемонтыТрудовыеЗатраты.ID,
	ВТ_РемонтыПлан.РемонтыОборудования_ID,
	ВТ_РемонтыПлан.ДокументПлана,
	ВТ_РемонтыПлан.ВидДокумента,
	торо_ПроектныеЗатратыНаРемонтыРемонтныеРаботы.РемонтнаяРабота

ИНДЕКСИРОВАТЬ ПО
	РемонтыОборудования_ID,
	ОбъектРемонта,
	РемонтнаяРабота_ID,
	Квалификация
;
    
ВЫБРАТЬ РАЗРЕШЕННЫЕ РАЗЛИЧНЫЕ
	ВТ_РемонтыПлан.ОбъектРемонта КАК ОбъектРемонта,
	ВТ_РемонтыПлан.ВидРемонта КАК ВидРемонта,    
	"План-график ремонта" КАК ВидДокумента,
	ВТ_РемонтыПлан.РемонтыОборудования_ID КАК РемонтыОборудования_ID,
	ВТ_РемонтыПлан.ДокументПлана КАК ДокументПлана,
	торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.РемонтнаяРабота КАК РемонтнаяРабота,
	торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.ID КАК РемонтнаяРабота_ID,
	торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.Квалификация КАК Квалификация,  
	"Квалификация" КАК ВидЗатрат
ПОМЕСТИТЬ ФактическиеЗатраты
ИЗ
	ВТ_РемонтыПлан КАК ВТ_РемонтыПлан
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрНакопления.торо_ФактическиеТрудовыеЗатратыРемонтныхРабот КАК торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты
		ПО ВТ_РемонтыПлан.РемонтыОборудования_ID = торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.РемонтыОборудования_ID
   		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.торо_ЗавершенныеРемонтныеРаботы КАК торо_ЗавершенныеРемонтныеРаботыСрезПоследних
		ПО торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.РемонтыОборудования_ID = торо_ЗавершенныеРемонтныеРаботыСрезПоследних.ID
			И торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.Регистратор = торо_ЗавершенныеРемонтныеРаботыСрезПоследних.Регистратор
{ГДЕ
	(торо_ЗавершенныеРемонтныеРаботыСрезПоследних.ДатаНачала МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания)}

ОБЪЕДИНИТЬ ВСЕ  

ВЫБРАТЬ РАЗЛИЧНЫЕ
	ВТ_РемонтыПлан.ОбъектРемонта,
	ВТ_РемонтыПлан.ВидРемонта,  
	"Регламентные мероприятия",
	ВТ_РемонтыПлан.РемонтыОборудования_ID,
	ВТ_РемонтыПлан.ДокументПлана,
	торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.РемонтнаяРабота КАК РемонтнаяРабота,
	торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.ID КАК РемонтнаяРабота_ID,
	торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.Квалификация КАК Квалификация,  
	"Квалификация" КАК ВидЗатрат
ИЗ
	ВТ_РемонтыПлан КАК ВТ_РемонтыПлан
	ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрНакопления.торо_ФактическиеТрудовыеЗатратыРемонтныхРабот КАК торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты
	ПО ВТ_РемонтыПлан.РемонтыОборудования_ID = торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.РемонтыОборудования_ID    
	ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.торо_ЗавершенныеМероприятия КАК торо_ЗавершенныеМероприятияСрезПоследних
	ПО торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.РемонтыОборудования_ID = торо_ЗавершенныеМероприятияСрезПоследних.ID
			И торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.Регистратор = торо_ЗавершенныеМероприятияСрезПоследних.Регистратор
{ГДЕ
	(торо_ЗавершенныеМероприятияСрезПоследних.ДатаНачала МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания)}
ИНДЕКСИРОВАТЬ ПО
	РемонтыОборудования_ID,
	Квалификация,
	ОбъектРемонта,
	ДокументПлана
;
  
////////////////////////////////////////////////////////////////////////////////           
ВЫБРАТЬ РАЗЛИЧНЫЕ
	ВТ_РемонтыПлан.РЕмонтыОборудования_ID КАК РЕмонтыОборудования_ID,
	ВТ_РемонтыПлан.ДокументВводаРемонта КАК ДокументВводаРемонта,
	ЕСТЬNULL(ПлановыеЗатраты.Квалификация, ФактическиеЗатраты.Квалификация) КАК Квалификация,    
	ЕСТЬNULL(ПлановыеЗатраты.РемонтнаяРабота_ID, ФактическиеЗатраты.РемонтнаяРабота_ID) КАК РемонтнаяРабота_ID,
	ЕСТЬNULL(ПлановыеЗатраты.РемонтнаяРабота, ФактическиеЗатраты.Квалификация) КАК РемонтнаяРабота,
	ЕСТЬNULL(ПлановыеЗатраты.КоличествоПлан, 0) КАК ПлановоеКоличество,
	ЕСТЬNULL(ЕСТЬNULL(ПлановыеЗатраты.ДокументПлана, ФактическиеЗатраты.ДокументПлана), ВТ_РемонтыПлан.ДокументВводаРемонта) КАК ДокументПлана,
	ВЫБОР
		КОГДА ПлановыеЗатраты.ДокументПлана ЕСТЬ NULL
			ТОГДА ВТ_РемонтыПлан.ДокументВводаРемонта.Дата
		ИНАЧЕ ПлановыеЗатраты.ДокументПлана.Дата
	КОНЕЦ КАК ПлановыйПериод,
	ЕСТЬNULL(ПлановыеЗатраты.ВидЗатрат, ФактическиеЗатраты.ВидЗатрат) КАК ВидЗатрат,
	ВТ_РемонтыПлан.ОбъектРемонта КАК ОбъектРемонта,
	ВТ_РемонтыПлан.ВидРемонта КАК ВидРемонта,
	ВТ_РемонтыПлан.ДатаНачалаПлан КАК ДатаНачалаПлан,
	ВТ_РемонтыПлан.ДатаОкончанияПлан КАК ДатаОкончанияПлан,
	ВТ_РемонтыПлан.ВидДокумента КАК ВидДокумента
ПОМЕСТИТЬ ЗатратыПланФакт
ИЗ
	ВТ_РемонтыПлан КАК ВТ_РемонтыПлан
		ЛЕВОЕ СОЕДИНЕНИЕ ПлановыеЗатраты КАК ПлановыеЗатраты
			ПОЛНОЕ СОЕДИНЕНИЕ ФактическиеЗатраты КАК ФактическиеЗатраты
			ПО ПлановыеЗатраты.РЕмонтыОборудования_ID = ФактическиеЗатраты.РЕмонтыОборудования_ID
				И ПлановыеЗатраты.Квалификация = ФактическиеЗатраты.Квалификация
				И ПлановыеЗатраты.РемонтнаяРабота_ID = ФактическиеЗатраты.РемонтнаяРабота_ID
				И ПлановыеЗатраты.ВидЗатрат = ФактическиеЗатраты.ВидЗатрат
				И ПлановыеЗатраты.ОбъектРемонта = ФактическиеЗатраты.ОбъектРемонта
				И ПлановыеЗатраты.ДокументПлана = ФактическиеЗатраты.ДокументПлана
		ПО (ЕСТЬNULL(ПлановыеЗатраты.РЕмонтыОборудования_ID, ФактическиеЗатраты.РЕмонтыОборудования_ID) = ВТ_РемонтыПлан.РЕмонтыОборудования_ID)
			И (ЕСТЬNULL(ПлановыеЗатраты.ДокументПлана, ФактическиеЗатраты.ДокументПлана) = ВТ_РемонтыПлан.ДокументПлана)
ГДЕ
	НЕ ЕСТЬNULL(ПлановыеЗатраты.Квалификация, ФактическиеЗатраты.Квалификация) ЕСТЬ NULL

ИНДЕКСИРОВАТЬ ПО
	РемонтыОборудования_ID,
	ОбъектРемонта,
	РемонтнаяРабота_ID,
	Квалификация
;
   
   ////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	Вт_ДанныеИтогиПредв.РемонтыОборудования_ID КАК РемонтыОборудования_ID,
	торо_ОбъектыРемонта.Ссылка КАК ОбъектРемонта,   
	Вт_ДанныеИтогиПредв.ДокументПлана КАК ДокументПлана,
	Вт_ДанныеИтогиПредв.ВидРемонта КАК ВидРемонта,   
	Вт_ДанныеИтогиПредв.ВидЗатрат КАК ВидЗатрат,
	Вт_ДанныеИтогиПредв.ДатаНачалаПлан КАК ДатаНачалаПлан,
	Вт_ДанныеИтогиПредв.ДатаОкончанияПлан КАК ДатаОкончанияПлан,
	Вт_ДанныеИтогиПредв.ДокументВводаРемонта КАК Документ,
	Вт_ДанныеИтогиПредв.ВидДокумента КАК ВидДокумента,
	Вт_ДанныеИтогиПредв.РемонтнаяРабота КАК РемонтнаяРабота,
	Вт_ДанныеИтогиПредв.РемонтнаяРабота_ID КАК ID,
	Вт_ДанныеИтогиПредв.Квалификация КАК Квалификация,
	Вт_ДанныеИтогиПредв.ПлановоеКоличество КАК КоличествоПлан
	
ПОМЕСТИТЬ Вт_ДанныеИтоги
ИЗ
	ЗатратыПланФакт КАК Вт_ДанныеИтогиПредв
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.торо_ОбъектыРемонта КАК торо_ОбъектыРемонта
		ПО Вт_ДанныеИтогиПредв.ОбъектРемонта = торо_ОбъектыРемонта.Ссылка

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	Вт_ДанныеИтогиПредв.РемонтыОборудования_ID,
	торо_ОбъектыРемонта.Ссылка, 
	Вт_ДанныеИтогиПредв.ДокументПлана,
	Вт_ДанныеИтогиПредв.ВидРемонта,
	Вт_ДанныеИтогиПредв.ВидЗатрат,
	Вт_ДанныеИтогиПредв.ДатаНачалаПлан,
	Вт_ДанныеИтогиПредв.ДатаОкончанияПлан,
	Вт_ДанныеИтогиПредв.ДокументВводаРемонта,
	Вт_ДанныеИтогиПредв.ВидДокумента,
	Вт_ДанныеИтогиПредв.РемонтнаяРабота,
	Вт_ДанныеИтогиПредв.РемонтнаяРабота_ID,
	Вт_ДанныеИтогиПредв.Квалификация,
	Вт_ДанныеИтогиПредв.ПлановоеКоличество
	
ИЗ
	ЗатратыПланФакт КАК Вт_ДанныеИтогиПредв
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.торо_ОбъектыРемонта КАК торо_ОбъектыРемонта
			ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.торо_МаршрутыРегламентныхМероприятий КАК торо_МаршрутыРегламентныхМероприятий
			ПО (торо_МаршрутыРегламентныхМероприятий.ОбъектРемонта = торо_ОбъектыРемонта.Ссылка)
		ПО (Вт_ДанныеИтогиПредв.ОбъектРемонта = торо_МаршрутыРегламентныхМероприятий.СписокОбъектов)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	Вт_ДанныеИтоги.Квалификация КАК Номенклатура,
	Вт_ДанныеИтоги.РемонтыОборудования_ID КАК РемонтыОборудования_IDНоменклатура,
	Вт_ДанныеИтоги.ОбъектРемонта КАК ОбъектРемонтаНоменклатура,
	Вт_ДанныеИтоги.ВидРемонта КАК ВидРемонтаНоменклатура,
	Вт_ДанныеИтоги.ДатаНачалаПлан КАК ДатаНачалаПланНоменклатура,
	Вт_ДанныеИтоги.ДатаОкончанияПлан КАК ДатаОкончанияПланНоменклатура,
	Вт_ДанныеИтоги.ДокументПлана КАК ДокументПлана,
	Вт_ДанныеИтоги.ВидДокумента КАК ВидДокументаНоменклатура,
	СУММА(Вт_ДанныеИтоги.КоличествоПлан) КАК ПлановоеКоличествоНоменклатура,
	Вт_ДанныеИтоги.ВидЗатрат КАК ВидЗатратНоменклатура,
	&amp;ПолеОбъектИерархии КАК ОбъектИерархии
ИЗ
	Вт_ДанныеИтоги КАК Вт_ДанныеИтоги

СГРУППИРОВАТЬ ПО
	Вт_ДанныеИтоги.Квалификация,
	Вт_ДанныеИтоги.ДатаНачалаПлан,
	Вт_ДанныеИтоги.ВидЗатрат,
	Вт_ДанныеИтоги.ВидДокумента,
	Вт_ДанныеИтоги.ДатаОкончанияПлан,
	Вт_ДанныеИтоги.РемонтыОборудования_ID,
	Вт_ДанныеИтоги.ДокументПлана,
	Вт_ДанныеИтоги.ВидРемонта,
	Вт_ДанныеИтоги.ОбъектРемонта				</query>
		</item>
	</dataSet>
	<dataSet xsi:type="DataSetUnion">
		<name>НоменклатураФакт</name>
		<field xsi:type="DataSetFieldField">
			<dataPath>ФактическоеКоличествоНоменклатура</dataPath>
			<field>ФактическоеКоличествоНоменклатура</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Фактическое количество</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВидРемонтаНоменклатура</dataPath>
			<field>ВидРемонтаНоменклатура</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Вид ремонта номенклатура</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>Номенклатура</dataPath>
			<field>Номенклатура</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>IDРемонта</dataPath>
			<field>IDРемонта</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДокументЗаявка</dataPath>
			<field>ДокументЗаявка</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВидЗатрат</dataPath>
			<field>ВидЗатратНоменклатура</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Вид затрат</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ЕдиницаИзмеренияНоменклатура</dataPath>
			<field>ЕдиницаИзмеренияНоменклатура</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Единица измерения номенклатура</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>РемонтыОборудования_IDНоменклатура</dataPath>
			<field>РемонтыОборудования_IDНоменклатура</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Ремонты оборудования ID</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ОбъектРемонтаНоменклатура</dataPath>
			<field>ОбъектРемонтаНоменклатура</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Объект ремонта</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
			<valueType>
				<v8:Type xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d5p1:CatalogRef.торо_ОбъектыРемонта</v8:Type>
			</valueType>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ВидДокументаНоменклатура</dataPath>
			<field>ВидДокументаНоменклатура</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Вид документа</v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДокументПлана</dataPath>
			<field>ДокументПлана</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Документ плана</v8:content>
				</v8:item>
			</title>
			<role>
				<dcscom:dimension>true</dcscom:dimension>
			</role>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДатаНачалаПланНоменклатура</dataPath>
			<field>ДатаНачалаПланНоменклатура</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дата начала план </v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ДатаОкончанияПланНоменклатура</dataPath>
			<field>ДатаОкончанияПланНоменклатура</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Дата окончания план </v8:content>
				</v8:item>
			</title>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ХарактеристикаНоменклатуры</dataPath>
			<field>ХарактеристикаНоменклатуры</field>
		</field>
		<field xsi:type="DataSetFieldField">
			<dataPath>ОбъектИерархии</dataPath>
			<field>ОбъектИерархии</field>
			<title xsi:type="v8:LocalStringType">
				<v8:item>
					<v8:lang>ru</v8:lang>
					<v8:content>Объект иерархии</v8:content>
				</v8:item>
			</title>
		</field>
		<item xsi:type="DataSetQuery">
			<name>НаборДанныхНомен2</name>
			<field xsi:type="DataSetFieldField">
				<dataPath>ФактическоеКоличествоНоменклатура</dataPath>
				<field>ФактическоеКоличествоНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Фактическое количество номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ВидРемонтаНоменклатура</dataPath>
				<field>ВидРемонтаНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Вид ремонта номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Номенклатура</dataPath>
				<field>Номенклатура</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>IDРемонта</dataPath>
				<field>IDРемонта</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДокументЗаявка</dataPath>
				<field>ДокументЗаявка</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ВидЗатратНоменклатура</dataPath>
				<field>ВидЗатратНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Вид затрат номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ЕдиницаИзмеренияНоменклатура</dataPath>
				<field>ЕдиницаИзмеренияНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Единица измерения номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>РемонтыОборудования_IDНоменклатура</dataPath>
				<field>РемонтыОборудования_IDНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Ремонты оборудования IDНоменклатура</v8:content>
					</v8:item>
				</title>
				<role>
					<dcscom:dimension>true</dcscom:dimension>
				</role>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ОбъектРемонтаНоменклатура</dataPath>
				<field>ОбъектРемонтаНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Объект ремонта номенклатура</v8:content>
					</v8:item>
				</title>
				<role>
					<dcscom:dimension>true</dcscom:dimension>
				</role>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ВидДокументаНоменклатура</dataPath>
				<field>ВидДокументаНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Вид документа номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДокументПлана</dataPath>
				<field>ДокументПлана</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Документ плана</v8:content>
					</v8:item>
				</title>
				<role>
					<dcscom:dimension>true</dcscom:dimension>
				</role>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДатаНачалаПланНоменклатура</dataPath>
				<field>ДатаНачалаПланНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Дата начала план номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДатаОкончанияПланНоменклатура</dataPath>
				<field>ДатаОкончанияПланНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Дата окончания план номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ХарактеристикаНоменклатуры</dataPath>
				<field>ХарактеристикаНоменклатуры</field>
			</field>
			<dataSource>ИсточникДанных1</dataSource>
			<query> ВЫБРАТЬ РАЗРЕШЕННЫЕ
	торо_ОбщиеДанныеПоРемонтам.ОбъектРемонта КАК ОбъектРемонта,
	торо_ОбщиеДанныеПоРемонтам.ВидРемонта КАК ВидРемонта,
	торо_ОбщиеДанныеПоРемонтам.IDРемонта КАК ID,
	торо_ОбщиеДанныеПоРемонтам.ЕстьЗаявка КАК ЕстьЗаявка,
	торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки КАК ВидДокументаНачалаЦепочки,
	торо_АктуальныеПлановыеДатыРемонтов.ДокументНачалаЦепочки КАК ДокументВводаРемонта,
	торо_АктуальныеПлановыеДатыРемонтов.ДатаНачала КАК ДатаНачалаПлан,
	торо_АктуальныеПлановыеДатыРемонтов.ДатаОкончания КАК ДатаОкончанияПлан,
	ВЫБОР
		КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ПланГрафикППР)
			ТОГДА "План-график ремонта"
		КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ГрафикРегламентныхМероприятий)
			ТОГДА "Регламентные мероприятия"
		КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ВыявленныйДефект)
			ТОГДА "Выявленные дефекты"
		КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ВнешнееОснованиеДляРабот)
			ТОГДА "Внешние основания"
	КОНЕЦ КАК ВидДокумента,
	торо_АктуальныеПлановыеДатыРемонтов.ДокументНачалаЦепочки КАК ДокументПлана
ПОМЕСТИТЬ ВТ_РемонтыПланВсе
ИЗ
	РегистрСведений.торо_ОбщиеДанныеПоРемонтам КАК торо_ОбщиеДанныеПоРемонтам
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.торо_АктуальныеПлановыеДатыРемонтов КАК торо_АктуальныеПлановыеДатыРемонтов
		ПО торо_ОбщиеДанныеПоРемонтам.IDРемонта = торо_АктуальныеПлановыеДатыРемонтов.IDРемонта
ГДЕ
	ВЫБОР
			КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ВыявленныйДефект)
				ТОГДА &amp;УчитыватьСметыПоДефектам
						И торо_ОбщиеДанныеПоРемонтам.ЕстьЗаявка
			КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ВнешнееОснованиеДляРабот)
				ТОГДА &amp;УчитыватьСметыПоВнешнимОснованиям
						И торо_ОбщиеДанныеПоРемонтам.ЕстьЗаявка
			КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ПланГрафикППР)
				ТОГДА &amp;УчитыватьПланГрафикиППР
			КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ГрафикРегламентныхМероприятий)
				ТОГДА &amp;УчитыватьРегламентныеМероприятия
			ИНАЧЕ ЛОЖЬ
		КОНЕЦ
	И НЕ торо_ОбщиеДанныеПоРемонтам.Отменен
	И НЕ торо_ОбщиеДанныеПоРемонтам.Замещен
{ГДЕ
	(торо_АктуальныеПлановыеДатыРемонтов.ДатаНачала &lt;= &amp;ДатаОкончания
			И торо_АктуальныеПлановыеДатыРемонтов.ДатаОкончания &gt;= &amp;ДатаНачала)}

ИНДЕКСИРОВАТЬ ПО
	ID
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	торо_ЗаявкиПоРемонтамСрезПоследних.IDРемонта КАК IDРемонта,
	торо_ЗаявкиПоРемонтамСрезПоследних.ДокументЗаявка КАК ДокументЗаявка
ПОМЕСТИТЬ ВТ_Заявки
ИЗ
	РегистрСведений.торо_ЗаявкиПоРемонтам.СрезПоследних(
			,
			IDРемонта В
				(ВЫБРАТЬ
					ВТ_РемонтыПланВсе.ID
				ИЗ
					ВТ_РемонтыПланВсе КАК ВТ_РемонтыПланВсе)) КАК торо_ЗаявкиПоРемонтамСрезПоследних
ГДЕ
	НЕ торо_ЗаявкиПоРемонтамСрезПоследних.Отменен

ИНДЕКСИРОВАТЬ ПО
	IDРемонта
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_РемонтыПланВсе.ОбъектРемонта КАК ОбъектРемонта,
	ВТ_РемонтыПланВсе.ВидРемонта КАК ВидРемонта,
	ВТ_РемонтыПланВсе.ID КАК ID,
	ВТ_РемонтыПланВсе.ЕстьЗаявка КАК ЕстьЗаявка,
	ВТ_РемонтыПланВсе.ВидДокументаНачалаЦепочки КАК ВидДокументаНачалаЦепочки,
	ВТ_РемонтыПланВсе.ДокументВводаРемонта КАК ДокументВводаРемонта,
	ВТ_РемонтыПланВсе.ДатаНачалаПлан КАК ДатаНачалаПлан,
	ВТ_РемонтыПланВсе.ДатаОкончанияПлан КАК ДатаОкончанияПлан,
	ВТ_РемонтыПланВсе.ВидДокумента КАК ВидДокумента,
	ЕСТЬNULL(ВТ_Заявки.ДокументЗаявка, ВТ_РемонтыПланВсе.ДокументПлана) КАК ДокументПлана
ПОМЕСТИТЬ ВТ_РемонтыПлан
ИЗ
	ВТ_РемонтыПланВсе КАК ВТ_РемонтыПланВсе
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_Заявки КАК ВТ_Заявки
		ПО ВТ_РемонтыПланВсе.ID = ВТ_Заявки.IDРемонта

ИНДЕКСИРОВАТЬ ПО
	ID,
	ДокументПлана
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗЛИЧНЫЕ
	ВТ_РемонтыПлан.ID КАК ID,
	ВТ_РемонтыПлан.ОбъектРемонта КАК ОбъектРемонта,
	ВТ_РемонтыПлан.ВидРемонта КАК ВидРемонта
ПОМЕСТИТЬ ВТ_РазличныеИДРемонтов
ИЗ
	ВТ_РемонтыПлан КАК ВТ_РемонтыПлан
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВТ_РазличныеИДРемонтов.ОбъектРемонта КАК ОбъектРемонта,
	ВТ_РазличныеИДРемонтов.ВидРемонта КАК ВидРемонта,
	ВТ_РазличныеИДРемонтов.ID КАК ID,
	торо_ФактическиеМатериальныеЗатратыРемонтныхРабот.Номенклатура КАК Номенклатура,
	СУММА(торо_ФактическиеМатериальныеЗатратыРемонтныхРабот.Количество) КАК КоличествоФакт,
	торо_ФактическиеМатериальныеЗатратыРемонтныхРабот.Регистратор КАК ДокументФакта,
	"Материальные затраты" КАК ВидЗатрат,
	торо_ФактическиеМатериальныеЗатратыРемонтныхРабот.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры
ПОМЕСТИТЬ ФактическиеЗатратыБезПлана
ИЗ
	ВТ_РазличныеИДРемонтов КАК ВТ_РазличныеИДРемонтов
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрНакопления.торо_ФактическиеМатериальныеЗатратыРемонтныхРабот КАК торо_ФактическиеМатериальныеЗатратыРемонтныхРабот
		ПО ВТ_РазличныеИДРемонтов.ID = торо_ФактическиеМатериальныеЗатратыРемонтныхРабот.РемонтыОборудования_ID

СГРУППИРОВАТЬ ПО
	ВТ_РазличныеИДРемонтов.ОбъектРемонта,
	ВТ_РазличныеИДРемонтов.ВидРемонта,
	ВТ_РазличныеИДРемонтов.ID,
	торо_ФактическиеМатериальныеЗатратыРемонтныхРабот.Номенклатура,
	торо_ФактическиеМатериальныеЗатратыРемонтныхРабот.Регистратор,
	торо_ФактическиеМатериальныеЗатратыРемонтныхРабот.ХарактеристикаНоменклатуры

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ВТ_РазличныеИДРемонтов.ОбъектРемонта,
	ВТ_РазличныеИДРемонтов.ВидРемонта,
	ВТ_РазличныеИДРемонтов.ID,
	торо_ФактическиеЗатратыЗапчастей.Номенклатура,
	торо_ФактическиеЗатратыЗапчастей.Количество,
	торо_ФактическиеЗатратыЗапчастей.Регистратор,
	"Затраты запчастей",
	торо_ФактическиеЗатратыЗапчастей.ХарактеристикаНоменклатуры
ИЗ
	ВТ_РазличныеИДРемонтов КАК ВТ_РазличныеИДРемонтов
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрНакопления.торо_ФактическиеЗатратыЗапчастей КАК торо_ФактическиеЗатратыЗапчастей
		ПО ВТ_РазличныеИДРемонтов.ID = торо_ФактическиеЗатратыЗапчастей.РемонтыОборудования_ID
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ФактическиеЗатратыБезПлана.ОбъектРемонта КАК ОбъектРемонта,
	ФактическиеЗатратыБезПлана.ВидРемонта КАК ВидРемонта,
	ФактическиеЗатратыБезПлана.ID КАК ID,
	ФактическиеЗатратыБезПлана.Номенклатура КАК Номенклатура,
	ФактическиеЗатратыБезПлана.КоличествоФакт КАК КоличествоФакт,
	ФактическиеЗатратыБезПлана.ДокументФакта КАК ДокументФакта,
	ФактическиеЗатратыБезПлана.ВидЗатрат КАК ВидЗатрат,
	ВЫБОР
		КОГДА торо_АктОВыполненииЭтапаРаботРемонтыОборудования.ДокументИсточник ССЫЛКА Документ.торо_НарядНаВыполнениеРемонтныхРабот
			ТОГДА торо_НарядНаВыполнениеРемонтныхРаботРемонтыОборудования.ДокументИсточник
		ИНАЧЕ торо_АктОВыполненииЭтапаРаботРемонтыОборудования.ДокументИсточник
	КОНЕЦ КАК ДокументПлана,
	ФактическиеЗатратыБезПлана.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	торо_АктОВыполненииЭтапаРаботРемонтыОборудования.ДатаНачала КАК ДатаФакт
ПОМЕСТИТЬ ФактическиеЗатратыСПланом
ИЗ
	ФактическиеЗатратыБезПлана КАК ФактическиеЗатратыБезПлана
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.торо_АктОВыполненииЭтапаРабот.РемонтыОборудования КАК торо_АктОВыполненииЭтапаРаботРемонтыОборудования
			ЛЕВОЕ СОЕДИНЕНИЕ Документ.торо_НарядНаВыполнениеРемонтныхРабот.РемонтыОборудования КАК торо_НарядНаВыполнениеРемонтныхРаботРемонтыОборудования
			ПО торо_АктОВыполненииЭтапаРаботРемонтыОборудования.ДокументИсточник = торо_НарядНаВыполнениеРемонтныхРаботРемонтыОборудования.Ссылка
				И торо_АктОВыполненииЭтапаРаботРемонтыОборудования.ID = торо_НарядНаВыполнениеРемонтныхРаботРемонтыОборудования.ID
		ПО ФактическиеЗатратыБезПлана.ДокументФакта = торо_АктОВыполненииЭтапаРаботРемонтыОборудования.Ссылка
			И ФактическиеЗатратыБезПлана.ID = торо_АктОВыполненииЭтапаРаботРемонтыОборудования.ID

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ФактическиеЗатратыБезПлана.ОбъектРемонта,
	ФактическиеЗатратыБезПлана.ВидРемонта,
	ФактическиеЗатратыБезПлана.ID,
	ФактическиеЗатратыБезПлана.Номенклатура,
	ФактическиеЗатратыБезПлана.КоличествоФакт,
	ФактическиеЗатратыБезПлана.ДокументФакта,
	ФактическиеЗатратыБезПлана.ВидЗатрат,
	ВЫБОР
		КОГДА торо_АктОВыполненииРегламентногоМероприятияМероприятия.ДокументИсточник ССЫЛКА Документ.торо_НарядНаРегламентноеМероприятие
			ТОГДА торо_НарядНаРегламентноеМероприятиеРегламентныеМероприятия.ДокументИсточник
		ИНАЧЕ торо_АктОВыполненииРегламентногоМероприятияМероприятия.ДокументИсточник
	КОНЕЦ,
	ФактическиеЗатратыБезПлана.ХарактеристикаНоменклатуры,
	торо_АктОВыполненииРегламентногоМероприятияМероприятия.ДатаНачала
ИЗ
	ФактическиеЗатратыБезПлана КАК ФактическиеЗатратыБезПлана
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.торо_АктОВыполненииРегламентногоМероприятия.Мероприятия КАК торо_АктОВыполненииРегламентногоМероприятияМероприятия
			ЛЕВОЕ СОЕДИНЕНИЕ Документ.торо_НарядНаРегламентноеМероприятие.РегламентныеМероприятия КАК торо_НарядНаРегламентноеМероприятиеРегламентныеМероприятия
			ПО торо_АктОВыполненииРегламентногоМероприятияМероприятия.ДокументИсточник = торо_НарядНаРегламентноеМероприятиеРегламентныеМероприятия.Ссылка
				И торо_АктОВыполненииРегламентногоМероприятияМероприятия.ID = торо_НарядНаРегламентноеМероприятиеРегламентныеМероприятия.ID
		ПО ФактическиеЗатратыБезПлана.ДокументФакта = торо_АктОВыполненииРегламентногоМероприятияМероприятия.Ссылка
			И ФактическиеЗатратыБезПлана.ID = торо_АктОВыполненииРегламентногоМероприятияМероприятия.ID
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ФактическиеЗатратыСПланом.ОбъектРемонта КАК ОбъектРемонта,
	ФактическиеЗатратыСПланом.ВидРемонта КАК ВидРемонта,
	ФактическиеЗатратыСПланом.ID КАК ID,
	ФактическиеЗатратыСПланом.Номенклатура КАК Номенклатура,
	СУММА(ФактическиеЗатратыСПланом.КоличествоФакт) КАК КоличествоФакт,
	ФактическиеЗатратыСПланом.ДокументФакта КАК ДокументФакта,
	ФактическиеЗатратыСПланом.ВидЗатрат КАК ВидЗатрат,
	ФактическиеЗатратыСПланом.ДокументПлана КАК ДокументПлана,
	ВТ_РемонтыПлан.ДокументВводаРемонта КАК ДокументВводаРемонта,
	ФактическиеЗатратыСПланом.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры,
	ФактическиеЗатратыСПланом.ДатаФакт КАК ДатаФакт
ПОМЕСТИТЬ ФактическиеЗатраты
ИЗ
	ФактическиеЗатратыСПланом КАК ФактическиеЗатратыСПланом
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ВТ_РемонтыПлан КАК ВТ_РемонтыПлан
		ПО ФактическиеЗатратыСПланом.ID = ВТ_РемонтыПлан.ID
			И ФактическиеЗатратыСПланом.ДокументПлана = ВТ_РемонтыПлан.ДокументПлана

СГРУППИРОВАТЬ ПО
	ФактическиеЗатратыСПланом.ОбъектРемонта,
	ФактическиеЗатратыСПланом.ВидРемонта,
	ФактическиеЗатратыСПланом.ID,
	ФактическиеЗатратыСПланом.Номенклатура,
	ФактическиеЗатратыСПланом.ДокументФакта,
	ФактическиеЗатратыСПланом.ВидЗатрат,
	ФактическиеЗатратыСПланом.ДокументПлана,
	ВТ_РемонтыПлан.ДокументВводаРемонта,
	ФактическиеЗатратыСПланом.ХарактеристикаНоменклатуры,
	ФактическиеЗатратыСПланом.ДатаФакт
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ РАЗЛИЧНЫЕ
	ВТ_РемонтыПлан.ID КАК РЕмонтыОборудования_ID,
	ВТ_РемонтыПлан.ДокументВводаРемонта КАК ДокументВводаРемонта,
	ФактическиеЗатраты.Номенклатура КАК Номенклатура,
	ФактическиеЗатраты.КоличествоФакт КАК ФактическоеКоличество,
	ФактическиеЗатраты.ДокументФакта КАК ДокументФакта,
	ФактическиеЗатраты.ДатаФакт КАК ФактическийПериод,
	ФактическиеЗатраты.ВидЗатрат КАК ВидЗатрат,
	ВТ_РемонтыПлан.ОбъектРемонта КАК ОбъектРемонта,
	ВТ_РемонтыПлан.ВидРемонта КАК ВидРемонта,
	ВТ_РемонтыПлан.ДатаНачалаПлан КАК ДатаНачалаПлан,
	ВТ_РемонтыПлан.ДатаОкончанияПлан КАК ДатаОкончанияПлан,
	ВТ_РемонтыПлан.ВидДокумента КАК ВидДокумента,
	ВТ_РемонтыПлан.ДокументПлана КАК ДокументПлана,
	ФактическиеЗатраты.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры
ПОМЕСТИТЬ ЗатратыПланФакт
ИЗ
	ВТ_РемонтыПлан КАК ВТ_РемонтыПлан
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ ФактическиеЗатраты КАК ФактическиеЗатраты
		ПО (ФактическиеЗатраты.ID = ВТ_РемонтыПлан.ID)
			И ВТ_РемонтыПлан.ДокументПлана = ФактическиеЗатраты.ДокументПлана
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ЗатратыПланФакт.Номенклатура КАК Номенклатура,
	ЗатратыПланФакт.РЕмонтыОборудования_ID КАК РемонтыОборудования_IDНоменклатура,
	ЕСТЬNULL(торо_МаршрутыРегламентныхМероприятий.ОбъектРемонта, ЗатратыПланФакт.ОбъектРемонта) КАК ОбъектРемонтаНоменклатура,
	ЗатратыПланФакт.ВидРемонта КАК ВидРемонтаНоменклатура,
	ЗатратыПланФакт.ДокументФакта КАК ДокументФакта,
	МАКСИМУМ(ЗатратыПланФакт.ДатаНачалаПлан) КАК ДатаНачалаПланНоменклатура,
	МАКСИМУМ(ЗатратыПланФакт.ДатаОкончанияПлан) КАК ДатаОкончанияПланНоменклатура,
	СУММА(ЗатратыПланФакт.ФактическоеКоличество) КАК ФактическоеКоличествоНоменклатура,
	ЗатратыПланФакт.Номенклатура.ЕдиницаИзмерения КАК ЕдиницаИзмеренияНоменклатура,
	ЗатратыПланФакт.ВидЗатрат КАК ВидЗатратНоменклатура,
	ЗатратыПланФакт.ВидДокумента КАК ВидДокументаНоменклатура,
	МАКСИМУМ(ЕСТЬNULL(ЗатратыПланФакт.ФактическийПериод, ДАТАВРЕМЯ(1, 1, 1))) КАК ДатаНачалаФактНоменклатура,
	ЗатратыПланФакт.ДокументПлана КАК ДокументПлана,
	ЗатратыПланФакт.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры
ПОМЕСТИТЬ ЗатратыБезУчетаВалюты
ИЗ
	ЗатратыПланФакт КАК ЗатратыПланФакт
		ЛЕВОЕ СОЕДИНЕНИЕ РегистрСведений.торо_МаршрутыРегламентныхМероприятий КАК торо_МаршрутыРегламентныхМероприятий
		ПО ЗатратыПланФакт.ОбъектРемонта = торо_МаршрутыРегламентныхМероприятий.СписокОбъектов

СГРУППИРОВАТЬ ПО
	ЗатратыПланФакт.Номенклатура,
	ЗатратыПланФакт.РЕмонтыОборудования_ID,
	ЕСТЬNULL(торо_МаршрутыРегламентныхМероприятий.ОбъектРемонта, ЗатратыПланФакт.ОбъектРемонта),
	ЗатратыПланФакт.ВидРемонта,
	ЗатратыПланФакт.Номенклатура.ЕдиницаИзмерения,
	ЗатратыПланФакт.ВидЗатрат,
	ЗатратыПланФакт.ВидДокумента,
	ЗатратыПланФакт.ДокументПлана,
	ЗатратыПланФакт.ДокументФакта,
	ЗатратыПланФакт.ХарактеристикаНоменклатуры
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ЗатратыБезУчетаВалюты.Номенклатура КАК Номенклатура,
	ЗатратыБезУчетаВалюты.РемонтыОборудования_IDНоменклатура КАК РемонтыОборудования_IDНоменклатура,
	ЗатратыБезУчетаВалюты.ОбъектРемонтаНоменклатура КАК ОбъектРемонтаНоменклатура,
	ЗатратыБезУчетаВалюты.ВидРемонтаНоменклатура КАК ВидРемонтаНоменклатура,
	ЗатратыБезУчетаВалюты.ДокументФакта КАК ДокументФакта,
	ЗатратыБезУчетаВалюты.ДатаНачалаПланНоменклатура КАК ДатаНачалаПланНоменклатура,
	ЗатратыБезУчетаВалюты.ДатаОкончанияПланНоменклатура КАК ДатаОкончанияПланНоменклатура,
	ЗатратыБезУчетаВалюты.ФактическоеКоличествоНоменклатура КАК ФактическоеКоличествоНоменклатура,
	ЗатратыБезУчетаВалюты.ЕдиницаИзмеренияНоменклатура КАК ЕдиницаИзмеренияНоменклатура,
	ЗатратыБезУчетаВалюты.ВидЗатратНоменклатура КАК ВидЗатратНоменклатура,
	ЗатратыБезУчетаВалюты.ВидДокументаНоменклатура КАК ВидДокументаНоменклатура,
	ЗатратыБезУчетаВалюты.ДатаНачалаФактНоменклатура КАК ДатаНачалаФактНоменклатура,
	ЗатратыБезУчетаВалюты.ДокументПлана КАК ДокументПлана,
	ЗатратыБезУчетаВалюты.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры
ПОМЕСТИТЬ СНулевымиЗначениями
ИЗ
	ЗатратыБезУчетаВалюты КАК ЗатратыБезУчетаВалюты
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.торо_ОбъектыРемонта КАК торо_ОбъектыРемонта
		ПО ЗатратыБезУчетаВалюты.ОбъектРемонтаНоменклатура = торо_ОбъектыРемонта.Ссылка
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	СНулевымиЗначениями.Номенклатура КАК Номенклатура,
	СНулевымиЗначениями.РемонтыОборудования_IDНоменклатура КАК РемонтыОборудования_IDНоменклатура,
	СНулевымиЗначениями.ОбъектРемонтаНоменклатура КАК ОбъектРемонтаНоменклатура,
	СНулевымиЗначениями.ВидРемонтаНоменклатура КАК ВидРемонтаНоменклатура,	
	СНулевымиЗначениями.ФактическоеКоличествоНоменклатура КАК ФактическоеКоличествоНоменклатура,
	СНулевымиЗначениями.ЕдиницаИзмеренияНоменклатура КАК ЕдиницаИзмеренияНоменклатура,
	СНулевымиЗначениями.ВидЗатратНоменклатура КАК ВидЗатратНоменклатура,
	СНулевымиЗначениями.ВидДокументаНоменклатура КАК ВидДокументаНоменклатура,	
	СНулевымиЗначениями.ДокументПлана КАК ДокументПлана,
	СНулевымиЗначениями.ДатаНачалаПланНоменклатура КАК ДатаНачалаПланНоменклатура,
	СНулевымиЗначениями.ДатаОкончанияПланНоменклатура КАК ДатаОкончанияПланНоменклатура,
	СНулевымиЗначениями.ХарактеристикаНоменклатуры КАК ХарактеристикаНоменклатуры
ИЗ
	СНулевымиЗначениями КАК СНулевымиЗначениями
ГДЕ
	СНулевымиЗначениями.ФактическоеКоличествоНоменклатура &lt;&gt; 0
	И НЕ СНулевымиЗначениями.ФактическоеКоличествоНоменклатура ЕСТЬ NULL</query>
		</item>
		<item xsi:type="DataSetQuery">
			<name>НаборДанныхКвалиф2</name>
			<field xsi:type="DataSetFieldField">
				<dataPath>ВидРемонтаНоменклатура</dataPath>
				<field>ВидРемонтаНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Вид ремонта номенклатура</v8:content>
					</v8:item>
				</title>
				<role>
					<dcscom:dimension>true</dcscom:dimension>
				</role>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>IDРемонта</dataPath>
				<field>IDРемонта</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДокументЗаявка</dataPath>
				<field>ДокументЗаявка</field>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ВидДокументаНоменклатура</dataPath>
				<field>ВидДокументаНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Вид документа номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>РемонтыОборудования_IDНоменклатура</dataPath>
				<field>РемонтыОборудования_IDНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Ремонты оборудования IDНоменклатура</v8:content>
					</v8:item>
				</title>
				<role>
					<dcscom:dimension>true</dcscom:dimension>
				</role>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДатаНачалаПланНоменклатура</dataPath>
				<field>ДатаНачалаПланНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Дата начала план номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ОбъектРемонтаНоменклатура</dataPath>
				<field>ОбъектРемонтаНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Объект ремонта номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДатаОкончанияПланНоменклатура</dataPath>
				<field>ДатаОкончанияПланНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Дата окончания план номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ДокументПлана</dataPath>
				<field>ДокументПлана</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Документ плана</v8:content>
					</v8:item>
				</title>
				<role>
					<dcscom:dimension>true</dcscom:dimension>
				</role>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ВидЗатратНоменклатура</dataPath>
				<field>ВидЗатратНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Вид затрат номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>Номенклатура</dataPath>
				<field>Номенклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ФактическоеКоличествоНоменклатура</dataPath>
				<field>ФактическоеКоличествоНоменклатура</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Фактическое количество номенклатура</v8:content>
					</v8:item>
				</title>
			</field>
			<field xsi:type="DataSetFieldField">
				<dataPath>ОбъектИерархии</dataPath>
				<field>ОбъектИерархии</field>
				<title xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>Объект иерархии</v8:content>
					</v8:item>
				</title>
			</field>
			<dataSource>ИсточникДанных1</dataSource>
			<query>ВЫБРАТЬ РАЗРЕШЕННЫЕ
	торо_ОбщиеДанныеПоРемонтам.ОбъектРемонта КАК ОбъектРемонта,
	торо_ОбщиеДанныеПоРемонтам.ВидРемонта КАК ВидРемонта,
	торо_ОбщиеДанныеПоРемонтам.IDРемонта КАК РемонтыОборудования_ID,
	торо_ОбщиеДанныеПоРемонтам.ЕстьЗаявка КАК ЕстьЗаявка,
	торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки КАК ВидДокументаНачалаЦепочки,
	торо_АктуальныеПлановыеДатыРемонтов.ДокументНачалаЦепочки КАК ДокументВводаРемонта,
	торо_АктуальныеПлановыеДатыРемонтов.ДатаНачала КАК ДатаНачалаПлан,
	торо_АктуальныеПлановыеДатыРемонтов.ДатаОкончания КАК ДатаОкончанияПлан,
	ВЫБОР
		КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ПланГрафикППР)
			ТОГДА "План-график ремонта"
		КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ГрафикРегламентныхМероприятий)
			ТОГДА "Регламентные мероприятия"
		КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ВыявленныйДефект)
			ТОГДА "Выявленные дефекты"
		КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ВнешнееОснованиеДляРабот)
			ТОГДА "Внешние основания"
	КОНЕЦ КАК ВидДокумента,
	торо_АктуальныеПлановыеДатыРемонтов.ДокументНачалаЦепочки КАК ДокументПлана
ПОМЕСТИТЬ ВТ_РемонтыПланВсе
ИЗ
	РегистрСведений.торо_ОбщиеДанныеПоРемонтам КАК торо_ОбщиеДанныеПоРемонтам
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.торо_АктуальныеПлановыеДатыРемонтов КАК торо_АктуальныеПлановыеДатыРемонтов
		ПО торо_ОбщиеДанныеПоРемонтам.IDРемонта = торо_АктуальныеПлановыеДатыРемонтов.IDРемонта
ГДЕ
	ВЫБОР
			КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ВыявленныйДефект)
				ТОГДА &amp;УчитыватьСметыПоДефектам
						И торо_ОбщиеДанныеПоРемонтам.ЕстьЗаявка
			КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ВнешнееОснованиеДляРабот)
				ТОГДА &amp;УчитыватьСметыПоВнешнимОснованиям
						И торо_ОбщиеДанныеПоРемонтам.ЕстьЗаявка
			КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ПланГрафикППР)
				ТОГДА &amp;УчитыватьПланГрафикиППР
			КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ГрафикРегламентныхМероприятий)
				ТОГДА &amp;УчитыватьРегламентныеМероприятия
			ИНАЧЕ ЛОЖЬ
		КОНЕЦ
	И НЕ торо_ОбщиеДанныеПоРемонтам.Отменен
	И НЕ торо_ОбщиеДанныеПоРемонтам.Замещен
{ГДЕ
	(торо_АктуальныеПлановыеДатыРемонтов.ДатаНачала &lt;= &amp;ДатаОкончания
			И торо_АктуальныеПлановыеДатыРемонтов.ДатаНачала &gt;= &amp;ДатаНачала)}

ИНДЕКСИРОВАТЬ ПО
	РемонтыОборудования_ID
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	торо_ЗаявкиПоРемонтамСрезПоследних.IDРемонта КАК РемонтыОборудования_ID,
	торо_ЗаявкиПоРемонтамСрезПоследних.ДокументЗаявка КАК ДокументЗаявка
ПОМЕСТИТЬ ВТ_Заявки
ИЗ
	РегистрСведений.торо_ЗаявкиПоРемонтам.СрезПоследних(
			,
			IDРемонта В
				(ВЫБРАТЬ
					ВТ_РемонтыПланВсе.РемонтыОборудования_ID
				ИЗ
					ВТ_РемонтыПланВсе КАК ВТ_РемонтыПланВсе)) КАК торо_ЗаявкиПоРемонтамСрезПоследних
ГДЕ
	НЕ торо_ЗаявкиПоРемонтамСрезПоследних.Отменен

ИНДЕКСИРОВАТЬ ПО
	РемонтыОборудования_ID
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ВТ_РемонтыПланВсе.ОбъектРемонта КАК ОбъектРемонта,
	ВТ_РемонтыПланВсе.ВидРемонта КАК ВидРемонта,
	ВТ_РемонтыПланВсе.РемонтыОборудования_ID КАК РемонтыОборудования_ID,
	ВТ_РемонтыПланВсе.ЕстьЗаявка КАК ЕстьЗаявка,
	ВТ_РемонтыПланВсе.ВидДокументаНачалаЦепочки КАК ВидДокументаНачалаЦепочки,
	ВТ_РемонтыПланВсе.ДокументВводаРемонта КАК ДокументВводаРемонта,
	ВТ_РемонтыПланВсе.ДатаНачалаПлан КАК ДатаНачалаПлан,
	ВТ_РемонтыПланВсе.ДатаОкончанияПлан КАК ДатаОкончанияПлан,
	ВТ_РемонтыПланВсе.ВидДокумента КАК ВидДокумента,
	ЕСТЬNULL(ВТ_Заявки.ДокументЗаявка, ВТ_РемонтыПланВсе.ДокументПлана) КАК ДокументПлана
ПОМЕСТИТЬ ВТ_РемонтыПлан
ИЗ
	ВТ_РемонтыПланВсе КАК ВТ_РемонтыПланВсе
		ЛЕВОЕ СОЕДИНЕНИЕ ВТ_Заявки КАК ВТ_Заявки
		ПО ВТ_РемонтыПланВсе.РемонтыОборудования_ID = ВТ_Заявки.РемонтыОборудования_ID

ИНДЕКСИРОВАТЬ ПО
	РемонтыОборудования_ID,
	ДокументПлана
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВТ_РемонтыПлан.РемонтыОборудования_ID КАК РемонтыОборудования_ID,
	ВТ_РемонтыПлан.ОбъектРемонта КАК ОбъектРемонта,
	ВТ_РемонтыПлан.ВидРемонта КАК ВидРемонта,
	ВТ_РемонтыПлан.ДатаНачалаПлан КАК ДатаНачалаПлан,
	ВТ_РемонтыПлан.ДатаОкончанияПлан КАК ДатаОкончанияПлан,
	ВТ_РемонтыПлан.ДокументПлана КАК Документ,
	ВТ_РемонтыПлан.ВидДокумента КАК ВидДокумента,
	торо_ПлановыеТрудовыеЗатратыРемонтныхРабот.РемонтнаяРабота КАК РемонтнаяРабота,
	торо_ПлановыеТрудовыеЗатратыРемонтныхРабот.ID КАК РемонтнаяРабота_ID,
	торо_ПлановыеТрудовыеЗатратыРемонтныхРабот.Квалификация КАК Квалификация,
	СУММА(торо_ПлановыеТрудовыеЗатратыРемонтныхРабот.Количество) КАК Количество
ПОМЕСТИТЬ ПлановыеЗатратыЗаявки
ИЗ
	ВТ_РемонтыПлан КАК ВТ_РемонтыПлан
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрНакопления.торо_ПлановыеТрудовыеЗатратыРемонтныхРабот КАК торо_ПлановыеТрудовыеЗатратыРемонтныхРабот
		ПО ВТ_РемонтыПлан.РемонтыОборудования_ID = торо_ПлановыеТрудовыеЗатратыРемонтныхРабот.РемонтыОборудования_ID
			И ВТ_РемонтыПлан.ДокументПлана = торо_ПлановыеТрудовыеЗатратыРемонтныхРабот.Регистратор

СГРУППИРОВАТЬ ПО
	ВТ_РемонтыПлан.ОбъектРемонта,
	ВТ_РемонтыПлан.ДатаНачалаПлан,
	ВТ_РемонтыПлан.ДатаОкончанияПлан,
	ВТ_РемонтыПлан.ВидРемонта,
	торо_ПлановыеТрудовыеЗатратыРемонтныхРабот.Квалификация,
	торо_ПлановыеТрудовыеЗатратыРемонтныхРабот.ID,
	ВТ_РемонтыПлан.РемонтыОборудования_ID,
	ВТ_РемонтыПлан.ДокументПлана,
	ВТ_РемонтыПлан.ВидДокумента,
	торо_ПлановыеТрудовыеЗатратыРемонтныхРабот.РемонтнаяРабота

ИНДЕКСИРОВАТЬ ПО
	РемонтыОборудования_ID
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	ВТ_РемонтыПлан.РемонтыОборудования_ID КАК РемонтыОборудования_ID,
	ВТ_РемонтыПлан.ОбъектРемонта КАК ОбъектРемонта,
	ВТ_РемонтыПлан.ВидРемонта КАК ВидРемонта,
	ВТ_РемонтыПлан.ДатаНачалаПлан КАК ДатаНачалаПлан,
	ВТ_РемонтыПлан.ДатаОкончанияПлан КАК ДатаОкончанияПлан,
	ВТ_РемонтыПлан.ДокументПлана КАК Документ,
	ВТ_РемонтыПлан.ВидДокумента КАК ВидДокумента,
	торо_ПроектныеЗатратыНаРемонтыРемонтныеРаботы.РемонтнаяРабота КАК РемонтнаяРабота,
	торо_ПроектныеЗатратыНаРемонтыТрудовыеЗатраты.ID КАК РемонтнаяРабота_ID,
	торо_ПроектныеЗатратыНаРемонтыТрудовыеЗатраты.Квалификация КАК Квалификация,
	СУММА(торо_ПроектныеЗатратыНаРемонтыТрудовыеЗатраты.Количество) КАК Количество
ПОМЕСТИТЬ РемонтыСТрудозатратами
ИЗ
	ВТ_РемонтыПлан КАК ВТ_РемонтыПлан
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.торо_ПроектныеЗатратыНаРемонты.ТрудовыеЗатраты КАК торо_ПроектныеЗатратыНаРемонтыТрудовыеЗатраты
			ВНУТРЕННЕЕ СОЕДИНЕНИЕ Документ.торо_ПроектныеЗатратыНаРемонты.РемонтныеРаботы КАК торо_ПроектныеЗатратыНаРемонтыРемонтныеРаботы
			ПО торо_ПроектныеЗатратыНаРемонтыТрудовыеЗатраты.Ссылка = торо_ПроектныеЗатратыНаРемонтыРемонтныеРаботы.Ссылка
				И торо_ПроектныеЗатратыНаРемонтыТрудовыеЗатраты.ID = торо_ПроектныеЗатратыНаРемонтыРемонтныеРаботы.ID
		ПО ВТ_РемонтыПлан.РемонтыОборудования_ID = торо_ПроектныеЗатратыНаРемонтыТрудовыеЗатраты.Ссылка.IDРемонта
			И (НЕ ВТ_РемонтыПлан.ЕстьЗаявка)
			И (НЕ торо_ПроектныеЗатратыНаРемонтыТрудовыеЗатраты.Ссылка.ПометкаУдаления)

СГРУППИРОВАТЬ ПО
	ВТ_РемонтыПлан.ОбъектРемонта,
	ВТ_РемонтыПлан.ДатаНачалаПлан,
	ВТ_РемонтыПлан.ДатаОкончанияПлан,
	ВТ_РемонтыПлан.ВидРемонта,
	торо_ПроектныеЗатратыНаРемонтыТрудовыеЗатраты.Квалификация,
	торо_ПроектныеЗатратыНаРемонтыТрудовыеЗатраты.ID,
	ВТ_РемонтыПлан.РемонтыОборудования_ID,
	ВТ_РемонтыПлан.ДокументПлана,
	ВТ_РемонтыПлан.ВидДокумента,
	торо_ПроектныеЗатратыНаРемонтыРемонтныеРаботы.РемонтнаяРабота

ИНДЕКСИРОВАТЬ ПО
	Квалификация,
	ДатаНачалаПлан
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	РемонтыСТрудозатратами.РемонтыОборудования_ID КАК РемонтыОборудования_ID,
	РемонтыСТрудозатратами.ОбъектРемонта КАК ОбъектРемонта,
	РемонтыСТрудозатратами.ВидРемонта КАК ВидРемонта,
	РемонтыСТрудозатратами.ДатаНачалаПлан КАК ДатаНачалаПлан,
	РемонтыСТрудозатратами.ДатаОкончанияПлан КАК ДатаОкончанияПлан,
	РемонтыСТрудозатратами.Документ КАК Документ,
	РемонтыСТрудозатратами.ВидДокумента КАК ВидДокумента,
	РемонтыСТрудозатратами.РемонтнаяРабота КАК РемонтнаяРабота,
	РемонтыСТрудозатратами.РемонтнаяРабота_ID КАК РемонтнаяРабота_ID,
	РемонтыСТрудозатратами.Квалификация КАК Квалификация,
	РемонтыСТрудозатратами.Количество КАК Количество
ПОМЕСТИТЬ ПлановыеЗатраты
ИЗ
	РемонтыСТрудозатратами КАК РемонтыСТрудозатратами
	
ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	ПлановыеЗатратыЗаявки.РемонтыОборудования_ID,
	ПлановыеЗатратыЗаявки.ОбъектРемонта,
	ПлановыеЗатратыЗаявки.ВидРемонта,
	ПлановыеЗатратыЗаявки.ДатаНачалаПлан,
	ПлановыеЗатратыЗаявки.ДатаОкончанияПлан,
	ПлановыеЗатратыЗаявки.Документ,
	ПлановыеЗатратыЗаявки.ВидДокумента,
	ПлановыеЗатратыЗаявки.РемонтнаяРабота,
	ПлановыеЗатратыЗаявки.РемонтнаяРабота_ID,
	ПлановыеЗатратыЗаявки.Квалификация,
	ПлановыеЗатратыЗаявки.Количество
ИЗ
	ПлановыеЗатратыЗаявки КАК ПлановыеЗатратыЗаявки

ИНДЕКСИРОВАТЬ ПО
	РемонтыОборудования_ID,
	ОбъектРемонта,
	РемонтнаяРабота_ID,
	Квалификация
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.РемонтыОборудования_ID КАК РемонтыОборудования_ID,
	торо_ЗавершенныеРемонтныеРаботыСрезПоследних.ОбъектРемонта КАК ОбъектРемонта,
	торо_ЗавершенныеРемонтныеРаботыСрезПоследних.ВидРемонтныхРабот КАК ВидРемонта,
	"План-график ремонта" КАК ВидДокумента,
	торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.РемонтнаяРабота КАК РемонтнаяРабота,
	торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.ID КАК РемонтнаяРабота_ID,
	торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.Квалификация КАК Квалификация,
	СУММА(торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.Количество) КАК КоличествоФакт
ПОМЕСТИТЬ ФактическиеЗатраты
ИЗ
	РегистрНакопления.торо_ФактическиеТрудовыеЗатратыРемонтныхРабот КАК торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.торо_ЗавершенныеРемонтныеРаботы КАК торо_ЗавершенныеРемонтныеРаботыСрезПоследних
		ПО торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.РемонтыОборудования_ID = торо_ЗавершенныеРемонтныеРаботыСрезПоследних.ID
			И торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.Регистратор = торо_ЗавершенныеРемонтныеРаботыСрезПоследних.Регистратор
{ГДЕ
	(торо_ЗавершенныеРемонтныеРаботыСрезПоследних.ДатаНачала МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания)}

СГРУППИРОВАТЬ ПО
	торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.РемонтнаяРабота,
	торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.ID,
	торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.Квалификация,
	торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.РемонтыОборудования_ID,
	торо_ЗавершенныеРемонтныеРаботыСрезПоследних.ОбъектРемонта,
	торо_ЗавершенныеРемонтныеРаботыСрезПоследних.ВидРемонтныхРабот

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.РемонтыОборудования_ID,
	торо_ЗавершенныеМероприятияСрезПоследних.СписокОбъектов,
	торо_ЗавершенныеМероприятияСрезПоследних.ВидМероприятия,
	"Регламентные мероприятия",
	торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.РемонтнаяРабота,
	торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.ID,
	торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.Квалификация,
	СУММА(торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.Количество)
ИЗ
	РегистрНакопления.торо_ФактическиеТрудовыеЗатратыРемонтныхРабот КАК торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.торо_ЗавершенныеМероприятия КАК торо_ЗавершенныеМероприятияСрезПоследних
		ПО торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.РемонтыОборудования_ID = торо_ЗавершенныеМероприятияСрезПоследних.ID
			И торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.Регистратор = торо_ЗавершенныеМероприятияСрезПоследних.Регистратор
{ГДЕ
	(торо_ЗавершенныеМероприятияСрезПоследних.ДатаНачала МЕЖДУ &amp;ДатаНачала И &amp;ДатаОкончания)}

СГРУППИРОВАТЬ ПО
	торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.РемонтыОборудования_ID,
	торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.Квалификация,
	торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.ID,
	торо_ФактическиеТрудовыеЗатратыРемонтныхРаботОбороты.РемонтнаяРабота,
	торо_ЗавершенныеМероприятияСрезПоследних.СписокОбъектов,
	торо_ЗавершенныеМероприятияСрезПоследних.ВидМероприятия

ИНДЕКСИРОВАТЬ ПО
	РемонтыОборудования_ID
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ФактическиеЗатраты.РемонтыОборудования_ID КАК РемонтыОборудования_ID,
	ФактическиеЗатраты.ОбъектРемонта КАК ОбъектРемонта,
	ФактическиеЗатраты.ВидРемонта КАК ВидРемонта,
	торо_ОбщиеДанныеПоРемонтам.ДокументНачалаЦепочки КАК Документ,
	ВЫБОР
		КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ПланГрафикППР)
			ТОГДА "План-график ремонта"
		КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ГрафикРегламентныхМероприятий)
			ТОГДА "Регламентные мероприятия"
		КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ВыявленныйДефект)
			ТОГДА "Выявленные дефекты"
		КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ВнешнееОснованиеДляРабот)
			ТОГДА "Внешние основания"
	КОНЕЦ КАК ВидДокумента,
	ФактическиеЗатраты.РемонтнаяРабота КАК РемонтнаяРабота,
	ФактическиеЗатраты.РемонтнаяРабота_ID КАК РемонтнаяРабота_ID,
	ФактическиеЗатраты.Квалификация КАК Квалификация,
	ФактическиеЗатраты.КоличествоФакт КАК КоличествоФакт
ПОМЕСТИТЬ ФактТрудозатратыСПланом
ИЗ
	ФактическиеЗатраты КАК ФактическиеЗатраты
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.торо_ОбщиеДанныеПоРемонтам КАК торо_ОбщиеДанныеПоРемонтам
		ПО ФактическиеЗатраты.РемонтыОборудования_ID = торо_ОбщиеДанныеПоРемонтам.IDРемонта
ГДЕ
	ВЫБОР
			КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ВыявленныйДефект)
				ТОГДА &amp;УчитыватьСметыПоДефектам
						И торо_ОбщиеДанныеПоРемонтам.ЕстьЗаявка
			КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ВнешнееОснованиеДляРабот)
				ТОГДА &amp;УчитыватьСметыПоВнешнимОснованиям
						И торо_ОбщиеДанныеПоРемонтам.ЕстьЗаявка
			КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ПланГрафикППР)
				ТОГДА &amp;УчитыватьПланГрафикиППР
			КОГДА торо_ОбщиеДанныеПоРемонтам.ВидДокументаНачалаЦепочки = ЗНАЧЕНИЕ(Перечисление.торо_ВидыДокументовНачалаЦепочкиРемонтов.ГрафикРегламентныхМероприятий)
				ТОГДА &amp;УчитыватьРегламентныеМероприятия
			ИНАЧЕ ЛОЖЬ
		КОНЕЦ

ИНДЕКСИРОВАТЬ ПО
	РемонтыОборудования_ID,
	ОбъектРемонта,
	РемонтнаяРабота_ID,
	Квалификация
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	ЕСТЬNULL(ПлановыеЗатраты.РемонтыОборудования_ID, ФактическиеЗатраты.РемонтыОборудования_ID) КАК РемонтыОборудования_ID,
	ЕСТЬNULL(ПлановыеЗатраты.ОбъектРемонта, ФактическиеЗатраты.ОбъектРемонта) КАК ОбъектРемонта,
	ЕСТЬNULL(ПлановыеЗатраты.ВидРемонта, ФактическиеЗатраты.ВидРемонта) КАК ВидРемонта,
	ЕСТЬNULL(ПлановыеЗатраты.ДатаНачалаПлан, ДАТАВРЕМЯ(1, 1, 1)) КАК ДатаНачалаПлан,
	ЕСТЬNULL(ПлановыеЗатраты.ДатаОкончанияПлан, ДАТАВРЕМЯ(1, 1, 1)) КАК ДатаОкончанияПлан,
	ЕСТЬNULL(ПлановыеЗатраты.Документ, ФактическиеЗатраты.Документ) КАК Документ,
	ЕСТЬNULL(ПлановыеЗатраты.ВидДокумента, ФактическиеЗатраты.ВидДокумента) КАК ВидДокумента,
	ЕСТЬNULL(ПлановыеЗатраты.РемонтнаяРабота, ФактическиеЗатраты.РемонтнаяРабота) КАК РемонтнаяРабота,
	ЕСТЬNULL(ПлановыеЗатраты.РемонтнаяРабота_ID, ФактическиеЗатраты.РемонтнаяРабота_ID) КАК ID,
	ЕСТЬNULL(ПлановыеЗатраты.Квалификация, ФактическиеЗатраты.Квалификация) КАК Квалификация,
	ЕСТЬNULL(ПлановыеЗатраты.Количество, 0) КАК КоличествоПлан,
	ЕСТЬNULL(ФактическиеЗатраты.КоличествоФакт, 0) КАК КоличествоФакт
ПОМЕСТИТЬ Вт_ДанныеИтогиПредв
ИЗ
	ПлановыеЗатраты КАК ПлановыеЗатраты
		ПОЛНОЕ СОЕДИНЕНИЕ ФактТрудозатратыСПланом КАК ФактическиеЗатраты
		ПО ПлановыеЗатраты.РемонтыОборудования_ID = ФактическиеЗатраты.РемонтыОборудования_ID
			И ПлановыеЗатраты.ОбъектРемонта = ФактическиеЗатраты.ОбъектРемонта
			И ПлановыеЗатраты.РемонтнаяРабота_ID = ФактическиеЗатраты.РемонтнаяРабота_ID
			И ПлановыеЗатраты.Квалификация = ФактическиеЗатраты.Квалификация
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ РАЗРЕШЕННЫЕ
	Вт_ДанныеИтогиПредв.РемонтыОборудования_ID КАК РемонтыОборудования_ID,
	торо_ОбъектыРемонта.Ссылка КАК ОбъектРемонта,
	Вт_ДанныеИтогиПредв.ВидРемонта КАК ВидРемонта,
	Вт_ДанныеИтогиПредв.ДатаНачалаПлан КАК ДатаНачалаПлан,
	Вт_ДанныеИтогиПредв.ДатаОкончанияПлан КАК ДатаОкончанияПлан,
	Вт_ДанныеИтогиПредв.Документ КАК Документ,
	Вт_ДанныеИтогиПредв.ВидДокумента КАК ВидДокумента,
	Вт_ДанныеИтогиПредв.РемонтнаяРабота КАК РемонтнаяРабота,
	Вт_ДанныеИтогиПредв.ID КАК ID,
	Вт_ДанныеИтогиПредв.Квалификация КАК Квалификация,
	Вт_ДанныеИтогиПредв.КоличествоПлан КАК КоличествоПлан,
	Вт_ДанныеИтогиПредв.КоличествоФакт КАК КоличествоФакт
ПОМЕСТИТЬ Вт_ДанныеИтоги
ИЗ
	Вт_ДанныеИтогиПредв КАК Вт_ДанныеИтогиПредв
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.торо_ОбъектыРемонта КАК торо_ОбъектыРемонта
		ПО Вт_ДанныеИтогиПредв.ОбъектРемонта = торо_ОбъектыРемонта.Ссылка

ОБЪЕДИНИТЬ ВСЕ

ВЫБРАТЬ
	Вт_ДанныеИтогиПредв.РемонтыОборудования_ID,
	торо_ОбъектыРемонта.Ссылка,
	Вт_ДанныеИтогиПредв.ВидРемонта,
	Вт_ДанныеИтогиПредв.ДатаНачалаПлан,
	Вт_ДанныеИтогиПредв.ДатаОкончанияПлан,
	Вт_ДанныеИтогиПредв.Документ,
	Вт_ДанныеИтогиПредв.ВидДокумента,
	Вт_ДанныеИтогиПредв.РемонтнаяРабота,
	Вт_ДанныеИтогиПредв.ID,
	Вт_ДанныеИтогиПредв.Квалификация,
	Вт_ДанныеИтогиПредв.КоличествоПлан,
	Вт_ДанныеИтогиПредв.КоличествоФакт
ИЗ
	Вт_ДанныеИтогиПредв КАК Вт_ДанныеИтогиПредв
		ВНУТРЕННЕЕ СОЕДИНЕНИЕ Справочник.торо_ОбъектыРемонта КАК торо_ОбъектыРемонта
			ВНУТРЕННЕЕ СОЕДИНЕНИЕ РегистрСведений.торо_МаршрутыРегламентныхМероприятий КАК торо_МаршрутыРегламентныхМероприятий
			ПО (торо_МаршрутыРегламентныхМероприятий.ОбъектРемонта = торо_ОбъектыРемонта.Ссылка)
		ПО (Вт_ДанныеИтогиПредв.ОбъектРемонта = торо_МаршрутыРегламентныхМероприятий.СписокОбъектов)
;

////////////////////////////////////////////////////////////////////////////////
ВЫБРАТЬ
	Вт_ДанныеИтоги.РемонтыОборудования_ID КАК РемонтыОборудования_IDНоменклатура,
	Вт_ДанныеИтоги.ОбъектРемонта КАК ОбъектРемонтаНоменклатура,
	Вт_ДанныеИтоги.ВидРемонта КАК ВидРемонтаНоменклатура,
	Вт_ДанныеИтоги.ДатаНачалаПлан КАК ДатаНачалаПланНоменклатура,
	Вт_ДанныеИтоги.ДатаОкончанияПлан КАК ДатаОкончанияПланНоменклатура,
	Вт_ДанныеИтоги.Документ КАК ДокументПлана,
	Вт_ДанныеИтоги.ВидДокумента КАК ВидДокументаНоменклатура,
	"Квалификация" КАК ВидЗатратНоменклатура,
	Вт_ДанныеИтоги.Квалификация КАК Номенклатура,
	СУММА(Вт_ДанныеИтоги.КоличествоФакт) КАК ФактическоеКоличествоНоменклатура,
	&amp;ПолеОбъектИерархии КАК ОбъектИерархии
ИЗ
	Вт_ДанныеИтоги КАК Вт_ДанныеИтоги

СГРУППИРОВАТЬ ПО
	Вт_ДанныеИтоги.Квалификация,
	Вт_ДанныеИтоги.ДатаОкончанияПлан,
	Вт_ДанныеИтоги.Документ,
	Вт_ДанныеИтоги.ОбъектРемонта,
	Вт_ДанныеИтоги.ВидРемонта,
	Вт_ДанныеИтоги.РемонтыОборудования_ID,
	Вт_ДанныеИтоги.ДатаНачалаПлан,
	Вт_ДанныеИтоги.ВидДокумента</query>
		</item>
	</dataSet>
	<dataSetLink>
		<sourceDataSet>НаборДанныхНоменклатура</sourceDataSet>
		<destinationDataSet>НоменклатураФакт</destinationDataSet>
		<sourceExpression>РемонтыОборудования_IDНоменклатура</sourceExpression>
		<destinationExpression>РемонтыОборудования_IDНоменклатура</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>НаборДанныхНоменклатура</sourceDataSet>
		<destinationDataSet>НоменклатураФакт</destinationDataSet>
		<sourceExpression>Номенклатура</sourceExpression>
		<destinationExpression>Номенклатура</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>НаборДанныхНоменклатура</sourceDataSet>
		<destinationDataSet>НоменклатураФакт</destinationDataSet>
		<sourceExpression>ВидЗатрат</sourceExpression>
		<destinationExpression>ВидЗатрат</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>НаборДанныхНоменклатура</sourceDataSet>
		<destinationDataSet>НоменклатураФакт</destinationDataSet>
		<sourceExpression>ВидДокументаНоменклатура</sourceExpression>
		<destinationExpression>ВидДокументаНоменклатура</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>НаборДанныхНоменклатура</sourceDataSet>
		<destinationDataSet>НоменклатураФакт</destinationDataSet>
		<sourceExpression>ДокументПлана</sourceExpression>
		<destinationExpression>ДокументПлана</destinationExpression>
		<required>false</required>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>НаборДанныхНоменклатура</sourceDataSet>
		<destinationDataSet>НоменклатураФакт</destinationDataSet>
		<sourceExpression>ХарактеристикаНоменклатуры</sourceExpression>
		<destinationExpression>ХарактеристикаНоменклатуры</destinationExpression>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>Иерархия</sourceDataSet>
		<destinationDataSet>Иерархия</destinationDataSet>
		<sourceExpression>РодительИерархии</sourceExpression>
		<destinationExpression>ОбъектИерархии</destinationExpression>
		<parameter>Элемент</parameter>
		<parameterListAllowed>true</parameterListAllowed>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>Контроль</sourceDataSet>
		<destinationDataSet>Контроль</destinationDataSet>
		<sourceExpression>ЭлементКонтроль</sourceExpression>
		<destinationExpression>РодительКонтроль</destinationExpression>
		<parameter>Родитель</parameter>
		<parameterListAllowed>true</parameterListAllowed>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>НаборДанныхНоменклатура</sourceDataSet>
		<destinationDataSet>Иерархия</destinationDataSet>
		<sourceExpression>ОбъектИерархии</sourceExpression>
		<destinationExpression>ОбъектИерархии</destinationExpression>
		<parameter>Элемент</parameter>
		<parameterListAllowed>true</parameterListAllowed>
	</dataSetLink>
	<dataSetLink>
		<sourceDataSet>НаборДанныхНоменклатура</sourceDataSet>
		<destinationDataSet>НоменклатураФакт</destinationDataSet>
		<sourceExpression>ОбъектРемонтаНоменклатура</sourceExpression>
		<destinationExpression>ОбъектРемонтаНоменклатура</destinationExpression>
	</dataSetLink>
	<calculatedField>
		<dataPath>ОтклонениеКоличествоНоменклатура</dataPath>
		<expression>ФактическоеКоличествоНоменклатура - ПлановоеКоличествоНоменклатура</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Отклонение количество</v8:content>
			</v8:item>
		</title>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>ЧДЦ=3; ЧВН=; ЧГ=3,0</v8:content>
					</v8:item>
				</dcscor:value>
			</dcscor:item>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>ВыделятьОтрицательные</dcscor:parameter>
				<dcscor:value xsi:type="xs:boolean">true</dcscor:value>
			</dcscor:item>
		</appearance>
		<valueType>
			<v8:Type>xs:decimal</v8:Type>
			<v8:NumberQualifiers>
				<v8:Digits>0</v8:Digits>
				<v8:FractionDigits>0</v8:FractionDigits>
				<v8:AllowedSign>Any</v8:AllowedSign>
			</v8:NumberQualifiers>
		</valueType>
	</calculatedField>
	<calculatedField>
		<dataPath>КоличествоЗаполненоНоменклатура</dataPath>
		<expression>(ПлановоеКоличествоНоменклатура &lt;&gt; 0 И НЕ ПлановоеКоличествоНоменклатура ЕСТЬ NULL) ИЛИ (ФактическоеКоличествоНоменклатура &lt;&gt; 0 И НЕ ФактическоеКоличествоНоменклатура ЕСТЬ NULL)</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Количество заполнено</v8:content>
			</v8:item>
		</title>
		<useRestriction>
			<field>true</field>
			<group>true</group>
			<order>true</order>
		</useRestriction>
		<valueType>
			<v8:Type>xs:boolean</v8:Type>
		</valueType>
	</calculatedField>
	<calculatedField>
		<dataPath>ПлановоеКоличествоНоменклатураИтог</dataPath>
		<expression>ПлановоеКоличествоНоменклатура</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Плановое количество (итог)</v8:content>
			</v8:item>
		</title>
	</calculatedField>
	<calculatedField>
		<dataPath>ФактическоеКоличествоНоменклатураИтог</dataPath>
		<expression>ФактическоеКоличествоНоменклатура</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Фактическое количество (итог)</v8:content>
			</v8:item>
		</title>
	</calculatedField>
	<calculatedField>
		<dataPath>ОтклонениеКоличествоНоменклатураИтог</dataPath>
		<expression>ФактическоеКоличествоНоменклатура - ПлановоеКоличествоНоменклатура</expression>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Отклонение количество (итог)</v8:content>
			</v8:item>
		</title>
		<appearance>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>Формат</dcscor:parameter>
				<dcscor:value xsi:type="v8:LocalStringType">
					<v8:item>
						<v8:lang>ru</v8:lang>
						<v8:content>ЧДЦ=2; ЧГ=3,0</v8:content>
					</v8:item>
				</dcscor:value>
			</dcscor:item>
			<dcscor:item xsi:type="dcsset:SettingsParameterValue">
				<dcscor:parameter>ВыделятьОтрицательные</dcscor:parameter>
				<dcscor:value xsi:type="xs:boolean">true</dcscor:value>
			</dcscor:item>
		</appearance>
	</calculatedField>
	<totalField>
		<dataPath>ОтклонениеКоличествоНоменклатура</dataPath>
		<expression>ВЫБОР
    КОГДА Количество(Различные Номенклатура.ЕдиницаИзмерения) &gt; 1
        ТОГДА 0
    ИНАЧЕ Сумма(ЕстьNULL(ПлановоеКоличествоНоменклатура,0 )) - Сумма(ЕстьNULL(ФактическоеКоличествоНоменклатура, 0))
КОНЕЦ</expression>
		<group>Номенклатура</group>
		<group>ОбщийИтог</group>
	</totalField>
	<totalField>
		<dataPath>ФактическоеКоличествоНоменклатура</dataPath>
		<expression>ВЫБОР
    КОГДА Количество(Различные Номенклатура.ЕдиницаИзмерения) &gt; 1
        ТОГДА 0
    ИНАЧЕ Сумма(ФактическоеКоличествоНоменклатура)
КОНЕЦ
</expression>
		<group>Номенклатура</group>
		<group>ОбщийИтог</group>
	</totalField>
	<totalField>
		<dataPath>ПлановоеКоличествоНоменклатура</dataPath>
		<expression>ВЫБОР
    КОГДА Количество(Различные Номенклатура.ЕдиницаИзмерения) &gt; 1
        ТОГДА 0
    ИНАЧЕ Сумма(ПлановоеКоличествоНоменклатура)
КОНЕЦ
</expression>
		<group>Номенклатура</group>
		<group>ОбщийИтог</group>
	</totalField>
	<totalField>
		<dataPath>ПлановоеКоличествоНоменклатураИтог</dataPath>
		<expression>ВЫБОР
    КОГДА Количество(Различные Номенклатура.ЕдиницаИзмерения) &gt; 1
        ТОГДА 0
    ИНАЧЕ Сумма(ПлановоеКоличествоНоменклатураИтог)
КОНЕЦ</expression>
		<group>ОбщийИтог</group>
	</totalField>
	<totalField>
		<dataPath>ФактическоеКоличествоНоменклатураИтог</dataPath>
		<expression>ВЫБОР
    КОГДА Количество(Различные Номенклатура.ЕдиницаИзмерения) &gt; 1
        ТОГДА 0
    ИНАЧЕ Сумма(ФактическоеКоличествоНоменклатураИтог)
КОНЕЦ</expression>
		<group>ОбщийИтог</group>
	</totalField>
	<totalField>
		<dataPath>ОтклонениеКоличествоНоменклатураИтог</dataPath>
		<expression>ВЫБОР
    КОГДА Количество(Различные Номенклатура.ЕдиницаИзмерения) &gt; 1
        ТОГДА 0
    ИНАЧЕ Сумма(ЕстьNULL(ПлановоеКоличествоНоменклатура, 0)) - Сумма(ЕстьNULL(ФактическоеКоличествоНоменклатура, 0))
КОНЕЦ</expression>
		<group>ОбщийИтог</group>
	</totalField>
	<totalField>
		<dataPath>ОтклонениеКоличествоНоменклатураИтог</dataPath>
		<expression>Сумма(ЕстьNULL(ПлановоеКоличествоНоменклатура, 0)) - Сумма(ЕстьNULL(ФактическоеКоличествоНоменклатура, 0))</expression>
	</totalField>
	<totalField>
		<dataPath>ПлановоеКоличествоНоменклатураИтог</dataPath>
		<expression>Сумма(ПлановоеКоличествоНоменклатураИтог)</expression>
	</totalField>
	<totalField>
		<dataPath>ФактическоеКоличествоНоменклатураИтог</dataPath>
		<expression>Сумма(ФактическоеКоличествоНоменклатураИтог)</expression>
	</totalField>
	<parameter>
		<name>ПериодВыполнения</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Период</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>v8:StandardPeriod</v8:Type>
		</valueType>
		<value xsi:type="v8:StandardPeriod">
			<v8:variant xsi:type="v8:StandardPeriodVariant">Custom</v8:variant>
			<v8:startDate>0001-01-01T00:00:00</v8:startDate>
			<v8:endDate>0001-01-01T00:00:00</v8:endDate>
		</value>
		<useRestriction>false</useRestriction>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>УчитыватьПланГрафикиППР</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Учитывать план-графики ППР</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:boolean</v8:Type>
		</valueType>
		<value xsi:type="xs:boolean">true</value>
		<useRestriction>false</useRestriction>
		<availableAsField>false</availableAsField>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>УчитыватьСметыПоДефектам</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Учитывать сметы (заявки на ремонт) по дефектам</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:boolean</v8:Type>
		</valueType>
		<value xsi:type="xs:boolean">true</value>
		<useRestriction>false</useRestriction>
		<availableAsField>false</availableAsField>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>УчитыватьСметыПоВнешнимОснованиям</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Учитывать сметы (заявки на ремонт) по внешним основаниям</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:boolean</v8:Type>
		</valueType>
		<value xsi:type="xs:boolean">true</value>
		<useRestriction>false</useRestriction>
		<availableAsField>false</availableAsField>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>УчитыватьРегламентныеМероприятия</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Учитывать регламентные мероприятия</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:boolean</v8:Type>
		</valueType>
		<value xsi:type="xs:boolean">true</value>
		<useRestriction>false</useRestriction>
		<availableAsField>false</availableAsField>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>ДатаНачала</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Дата начала</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>&amp;ПериодВыполнения.ДатаНачала</expression>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>ДатаОкончания</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Дата окончания</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>true</useRestriction>
		<expression>&amp;ПериодВыполнения.ДатаОкончания</expression>
		<availableAsField>false</availableAsField>
	</parameter>
	<parameter>
		<name>ВидДокумента</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Вид документа</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:boolean</v8:Type>
		</valueType>
		<value xsi:type="xs:boolean">true</value>
		<useRestriction>false</useRestriction>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>Элемент</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Элемент</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.торо_ОбъектыРемонта</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>Родитель</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Родитель</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.торо_ОбъектыРемонта</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
	</parameter>
	<parameter>
		<name>ИерархияТип</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Структура иерархии</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type xmlns:d4p1="http://v8.1c.ru/8.1/data/enterprise/current-config">d4p1:CatalogRef.торо_СтруктурыОР</v8:Type>
		</valueType>
		<value xsi:nil="true"/>
		<useRestriction>false</useRestriction>
		<inputParameters>
			<dcscor:item>
				<dcscor:parameter>ВыборГруппИЭлементов</dcscor:parameter>
				<dcscor:value xmlns:d5p1="http://v8.1c.ru/8.1/data/enterprise" xsi:type="d5p1:FoldersAndItemsUse">Items</dcscor:value>
			</dcscor:item>
		</inputParameters>
		<use>Always</use>
	</parameter>
	<parameter>
		<name>Период</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Период</v8:content>
			</v8:item>
		</title>
		<valueType>
			<v8:Type>xs:dateTime</v8:Type>
			<v8:DateQualifiers>
				<v8:DateFractions>DateTime</v8:DateFractions>
			</v8:DateQualifiers>
		</valueType>
		<value xsi:type="xs:dateTime">0001-01-01T00:00:00</value>
		<useRestriction>false</useRestriction>
	</parameter>
	<parameter>
		<name>ПолеОбъектИерархии</name>
		<title xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>Поле объект иерархии</v8:content>
			</v8:item>
		</title>
		<value xsi:nil="true"/>
		<useRestriction>true</useRestriction>
	</parameter>
	<settingsVariant>
		<dcsset:name>Номенклатура</dcsset:name>
		<dcsset:presentation xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>План-фактный анализ затрат </v8:content>
			</v8:item>
		</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПлановоеКоличествоНоменклатура</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Плановое количество</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ФактическоеКоличествоНоменклатура</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Фактическое количество</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ОтклонениеКоличествоНоменклатура</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Отклонение количество</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ОтклонениеСуммаНоменклатура</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Отклонение сумма</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
			</dcsset:selection>
			<dcsset:filter>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:left xsi:type="dcscor:Field">КоличествоЗаполненоНоменклатура</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="xs:boolean">true</dcsset:right>
					<dcsset:viewMode>Inaccessible</dcsset:viewMode>
				</dcsset:item>
			</dcsset:filter>
			<dcsset:dataParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ПериодВыполнения</dcscor:parameter>
					<dcscor:value xsi:type="v8:StandardPeriod">
						<v8:variant xsi:type="v8:StandardPeriodVariant">ThisMonth</v8:variant>
					</dcscor:value>
					<dcsset:viewMode>Normal</dcsset:viewMode>
					<dcsset:userSettingID>f3d33299-93fc-4cf7-af29-de3c43ffdfe1</dcsset:userSettingID>
					<dcsset:userSettingPresentation xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Период отчета</v8:content>
						</v8:item>
					</dcsset:userSettingPresentation>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>УчитыватьПланГрафикиППР</dcscor:parameter>
					<dcscor:value xsi:type="xs:boolean">true</dcscor:value>
					<dcsset:viewMode>Normal</dcsset:viewMode>
					<dcsset:userSettingID>d141133a-a937-4aca-ae23-aee5a1037315</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>УчитыватьСметыПоДефектам</dcscor:parameter>
					<dcscor:value xsi:type="xs:boolean">true</dcscor:value>
					<dcsset:viewMode>Normal</dcsset:viewMode>
					<dcsset:userSettingID>b910c287-54ae-41c9-9de6-1b8ba9ff88c7</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>УчитыватьСметыПоВнешнимОснованиям</dcscor:parameter>
					<dcscor:value xsi:type="xs:boolean">true</dcscor:value>
					<dcsset:viewMode>Normal</dcsset:viewMode>
					<dcsset:userSettingID>d5166af6-598e-4e10-a0cc-bc87e34c6572</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>УчитыватьРегламентныеМероприятия</dcscor:parameter>
					<dcscor:value xsi:type="xs:boolean">true</dcscor:value>
					<dcsset:viewMode>Normal</dcsset:viewMode>
					<dcsset:userSettingID>cf1008f2-b4ba-466f-9ba4-b3fc77caa8d6</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВидДокумента</dcscor:parameter>
					<dcscor:value xsi:type="xs:boolean">true</dcscor:value>
					<dcsset:viewMode>Normal</dcsset:viewMode>
					<dcsset:userSettingID>86729bfe-cb56-4046-a64a-4e86846bfb17</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ИерархияТип</dcscor:parameter>
					<dcscor:value xsi:nil="true"/>
					<dcsset:viewMode>Normal</dcsset:viewMode>
					<dcsset:userSettingID>ba4cd870-c966-48f8-ab78-acac17c190ed</dcsset:userSettingID>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:outputParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьЗаголовок</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">Output</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Заголовок</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>План-фактный анализ затрат МТО</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьПараметрыДанных</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">Auto</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьОтбор</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">DontOutput</dcscor:value>
				</dcscor:item>
			</dcsset:outputParameters>
			<dcsset:item xsi:type="dcsset:StructureItemTable">
				<dcsset:column>
					<dcsset:name>ВидДокумента</dcsset:name>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>ВидДокументаНоменклатура</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
				</dcsset:column>
				<dcsset:row>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>ОбъектРемонтаНоменклатура</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
					<dcsset:item>
						<dcsset:groupItems>
							<dcsset:item xsi:type="dcsset:GroupItemField">
								<dcsset:field>ВидРемонта</dcsset:field>
								<dcsset:groupType>Items</dcsset:groupType>
								<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
								<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
								<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
							</dcsset:item>
						</dcsset:groupItems>
						<dcsset:order>
							<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
						</dcsset:order>
						<dcsset:selection>
							<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
						</dcsset:selection>
						<dcsset:item>
							<dcsset:groupItems>
								<dcsset:item xsi:type="dcsset:GroupItemField">
									<dcsset:field>ДатаНачалаПлан</dcsset:field>
									<dcsset:groupType>Items</dcsset:groupType>
									<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
									<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
									<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
								</dcsset:item>
								<dcsset:item xsi:type="dcsset:GroupItemField">
									<dcsset:field>ДатаОкончанияПлан</dcsset:field>
									<dcsset:groupType>Items</dcsset:groupType>
									<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
									<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
									<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
								</dcsset:item>
							</dcsset:groupItems>
							<dcsset:order>
								<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
							</dcsset:order>
							<dcsset:selection>
								<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
							</dcsset:selection>
							<dcsset:item>
								<dcsset:groupItems>
									<dcsset:item xsi:type="dcsset:GroupItemField">
										<dcsset:field>ВидЗатрат</dcsset:field>
										<dcsset:groupType>Items</dcsset:groupType>
										<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
										<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
										<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
									</dcsset:item>
								</dcsset:groupItems>
								<dcsset:order>
									<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
								</dcsset:order>
								<dcsset:selection>
									<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
								</dcsset:selection>
								<dcsset:item>
									<dcsset:groupItems>
										<dcsset:item xsi:type="dcsset:GroupItemField">
											<dcsset:field>Номенклатура</dcsset:field>
											<dcsset:groupType>Items</dcsset:groupType>
											<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
											<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
											<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
										</dcsset:item>
										<dcsset:item xsi:type="dcsset:GroupItemField">
											<dcsset:field>ХарактеристикаНоменклатуры</dcsset:field>
											<dcsset:groupType>Items</dcsset:groupType>
											<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
											<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
											<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
										</dcsset:item>
										<dcsset:item xsi:type="dcsset:GroupItemField">
											<dcsset:field>ЕдиницаИзмерения</dcsset:field>
											<dcsset:groupType>Items</dcsset:groupType>
											<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
											<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
											<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
										</dcsset:item>
									</dcsset:groupItems>
									<dcsset:order>
										<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
									</dcsset:order>
									<dcsset:selection>
										<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
									</dcsset:selection>
								</dcsset:item>
							</dcsset:item>
						</dcsset:item>
					</dcsset:item>
				</dcsset:row>
				<dcsset:outputParameters>
					<dcscor:item xsi:type="dcsset:SettingsParameterValue">
						<dcscor:use>false</dcscor:use>
						<dcscor:parameter>Заголовок</dcscor:parameter>
						<dcscor:value xsi:type="v8:LocalStringType"/>
					</dcscor:item>
				</dcsset:outputParameters>
			</dcsset:item>
			<dcsset:item xsi:type="dcsset:StructureItemGroup">
				<dcsset:groupItems>
					<dcsset:item xsi:type="dcsset:GroupItemField">
						<dcsset:field>ЕдиницаИзмерения</dcsset:field>
						<dcsset:groupType>Items</dcsset:groupType>
						<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
						<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
						<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
					</dcsset:item>
				</dcsset:groupItems>
				<dcsset:order>
					<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
				</dcsset:order>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ЕдиницаИзмерения</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ПлановоеКоличествоНоменклатураИтог</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ФактическоеКоличествоНоменклатураИтог</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ОтклонениеКоличествоНоменклатураИтог</dcsset:field>
					</dcsset:item>
				</dcsset:selection>
			</dcsset:item>
			<dcsset:item xsi:type="dcsset:StructureItemChart">
				<dcsset:use>false</dcsset:use>
				<dcsset:point>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>ОбъектРемонтаНоменклатура</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>Номенклатура</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
				</dcsset:point>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ОтклонениеСуммаНоменклатура</dcsset:field>
					</dcsset:item>
				</dcsset:selection>
				<dcsset:conditionalAppearance>
					<dcsset:item>
						<dcsset:selection/>
						<dcsset:filter/>
						<dcsset:appearance/>
					</dcsset:item>
				</dcsset:conditionalAppearance>
				<dcsset:outputParameters>
					<dcscor:item xsi:type="dcsset:SettingsParameterValue">
						<dcscor:parameter>ТипДиаграммы</dcscor:parameter>
						<dcscor:value xsi:type="v8ui:ChartType">Column</dcscor:value>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ТипДиаграммы.БазовоеЗначение</dcscor:parameter>
							<dcscor:value xsi:type="xs:decimal">0</dcscor:value>
						</dcscor:item>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ТипДиаграммы.ПропускатьБазовоеЗначение</dcscor:parameter>
							<dcscor:value xsi:type="xs:boolean">true</dcscor:value>
						</dcscor:item>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ТипДиаграммы.Окантовка</dcscor:parameter>
							<dcscor:value xsi:type="xs:boolean">true</dcscor:value>
						</dcscor:item>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ТипДиаграммы.Градиент</dcscor:parameter>
							<dcscor:value xsi:type="xs:boolean">true</dcscor:value>
						</dcscor:item>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ТипДиаграммы.РасположениеЛегенды</dcscor:parameter>
							<dcscor:value xsi:type="dcsset:DataCompositionChartLegendPlacement">None</dcscor:value>
						</dcscor:item>
					</dcscor:item>
					<dcscor:item xsi:type="dcsset:SettingsParameterValue">
						<dcscor:use>false</dcscor:use>
						<dcscor:parameter>Заголовок</dcscor:parameter>
						<dcscor:value xsi:type="v8:LocalStringType"/>
					</dcscor:item>
				</dcsset:outputParameters>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
	<settingsVariant>
		<dcsset:name>НоменклатураИерархия</dcsset:name>
		<dcsset:presentation xsi:type="v8:LocalStringType">
			<v8:item>
				<v8:lang>ru</v8:lang>
				<v8:content>План-фактный анализ затрат  (с иерархией)</v8:content>
			</v8:item>
		</dcsset:presentation>
		<dcsset:settings xmlns:style="http://v8.1c.ru/8.1/data/ui/style" xmlns:sys="http://v8.1c.ru/8.1/data/ui/fonts/system" xmlns:web="http://v8.1c.ru/8.1/data/ui/colors/web" xmlns:win="http://v8.1c.ru/8.1/data/ui/colors/windows">
			<dcsset:selection>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ПлановоеКоличествоНоменклатура</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Плановое количество</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ФактическоеКоличествоНоменклатура</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Фактическое количество</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemField">
					<dcsset:field>ОтклонениеКоличествоНоменклатура</dcsset:field>
					<dcsset:lwsTitle>
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Отклонение количество</v8:content>
						</v8:item>
					</dcsset:lwsTitle>
				</dcsset:item>
				<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
			</dcsset:selection>
			<dcsset:filter>
				<dcsset:item xsi:type="dcsset:FilterItemComparison">
					<dcsset:left xsi:type="dcscor:Field">КоличествоЗаполненоНоменклатура</dcsset:left>
					<dcsset:comparisonType>Equal</dcsset:comparisonType>
					<dcsset:right xsi:type="xs:boolean">true</dcsset:right>
					<dcsset:viewMode>Inaccessible</dcsset:viewMode>
				</dcsset:item>
			</dcsset:filter>
			<dcsset:dataParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ПериодВыполнения</dcscor:parameter>
					<dcscor:value xsi:type="v8:StandardPeriod">
						<v8:variant xsi:type="v8:StandardPeriodVariant">ThisMonth</v8:variant>
					</dcscor:value>
					<dcsset:viewMode>Normal</dcsset:viewMode>
					<dcsset:userSettingID>f3d33299-93fc-4cf7-af29-de3c43ffdfe1</dcsset:userSettingID>
					<dcsset:userSettingPresentation xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>Период отчета</v8:content>
						</v8:item>
					</dcsset:userSettingPresentation>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>УчитыватьПланГрафикиППР</dcscor:parameter>
					<dcscor:value xsi:type="xs:boolean">true</dcscor:value>
					<dcsset:viewMode>Normal</dcsset:viewMode>
					<dcsset:userSettingID>d141133a-a937-4aca-ae23-aee5a1037315</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>УчитыватьСметыПоДефектам</dcscor:parameter>
					<dcscor:value xsi:type="xs:boolean">true</dcscor:value>
					<dcsset:viewMode>Normal</dcsset:viewMode>
					<dcsset:userSettingID>b910c287-54ae-41c9-9de6-1b8ba9ff88c7</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>УчитыватьСметыПоВнешнимОснованиям</dcscor:parameter>
					<dcscor:value xsi:type="xs:boolean">true</dcscor:value>
					<dcsset:viewMode>Normal</dcsset:viewMode>
					<dcsset:userSettingID>d5166af6-598e-4e10-a0cc-bc87e34c6572</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>УчитыватьРегламентныеМероприятия</dcscor:parameter>
					<dcscor:value xsi:type="xs:boolean">true</dcscor:value>
					<dcsset:viewMode>Normal</dcsset:viewMode>
					<dcsset:userSettingID>cf1008f2-b4ba-466f-9ba4-b3fc77caa8d6</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВидДокумента</dcscor:parameter>
					<dcscor:value xsi:type="xs:boolean">true</dcscor:value>
					<dcsset:viewMode>Normal</dcsset:viewMode>
					<dcsset:userSettingID>86729bfe-cb56-4046-a64a-4e86846bfb17</dcsset:userSettingID>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ИерархияТип</dcscor:parameter>
					<dcscor:value xsi:nil="true"/>
					<dcsset:viewMode>Normal</dcsset:viewMode>
					<dcsset:userSettingID>ba4cd870-c966-48f8-ab78-acac17c190ed</dcsset:userSettingID>
				</dcscor:item>
			</dcsset:dataParameters>
			<dcsset:conditionalAppearance>
				<dcsset:item>
					<dcsset:selection>
						<dcsset:item>
							<dcsset:field>ОбъектРемонтаНоменклатура</dcsset:field>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:filter/>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ЦветФона</dcscor:parameter>
							<dcscor:value xsi:type="v8ui:Color">web:Gainsboro</dcscor:value>
						</dcscor:item>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>Шрифт</dcscor:parameter>
							<dcscor:value xsi:type="v8ui:Font" ref="sys:DefaultGUIFont" bold="true" italic="false" underline="false" strikeout="false" kind="WindowsFont"/>
						</dcscor:item>
					</dcsset:appearance>
				</dcsset:item>
				<dcsset:item>
					<dcsset:selection>
						<dcsset:item>
							<dcsset:field>ОбъектИерархии</dcsset:field>
						</dcsset:item>
					</dcsset:selection>
					<dcsset:filter/>
					<dcsset:appearance>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:use>false</dcscor:use>
							<dcscor:parameter>ЦветФона</dcscor:parameter>
							<dcscor:value xsi:type="v8ui:Color">web:Gainsboro</dcscor:value>
						</dcscor:item>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>Шрифт</dcscor:parameter>
							<dcscor:value xsi:type="v8ui:Font" ref="sys:DefaultGUIFont" bold="true" italic="false" underline="false" strikeout="false" kind="WindowsFont"/>
						</dcscor:item>
					</dcsset:appearance>
				</dcsset:item>
			</dcsset:conditionalAppearance>
			<dcsset:outputParameters>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьЗаголовок</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">Output</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>Заголовок</dcscor:parameter>
					<dcscor:value xsi:type="v8:LocalStringType">
						<v8:item>
							<v8:lang>ru</v8:lang>
							<v8:content>План-фактный анализ затрат МТО (с иерархией)</v8:content>
						</v8:item>
					</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьПараметрыДанных</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">Auto</dcscor:value>
				</dcscor:item>
				<dcscor:item xsi:type="dcsset:SettingsParameterValue">
					<dcscor:parameter>ВыводитьОтбор</dcscor:parameter>
					<dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">DontOutput</dcscor:value>
				</dcscor:item>
			</dcsset:outputParameters>
			<dcsset:item xsi:type="dcsset:StructureItemTable">
				<dcsset:column>
					<dcsset:name>ВидДокумента</dcsset:name>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>ВидДокументаНоменклатура</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
				</dcsset:column>
				<dcsset:row>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>ОбъектИерархии</dcsset:field>
							<dcsset:groupType>Hierarchy</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
					<dcsset:item>
						<dcsset:groupItems>
							<dcsset:item xsi:type="dcsset:GroupItemField">
								<dcsset:field>ОбъектРемонтаНоменклатура</dcsset:field>
								<dcsset:groupType>Items</dcsset:groupType>
								<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
								<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
								<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
							</dcsset:item>
						</dcsset:groupItems>
						<dcsset:order>
							<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
						</dcsset:order>
						<dcsset:selection>
							<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
						</dcsset:selection>
						<dcsset:item>
							<dcsset:groupItems>
								<dcsset:item xsi:type="dcsset:GroupItemField">
									<dcsset:field>ВидРемонта</dcsset:field>
									<dcsset:groupType>Items</dcsset:groupType>
									<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
									<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
									<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
								</dcsset:item>
							</dcsset:groupItems>
							<dcsset:order>
								<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
							</dcsset:order>
							<dcsset:selection>
								<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
							</dcsset:selection>
							<dcsset:item>
								<dcsset:groupItems>
									<dcsset:item xsi:type="dcsset:GroupItemField">
										<dcsset:field>ДатаНачалаПлан</dcsset:field>
										<dcsset:groupType>Items</dcsset:groupType>
										<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
										<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
										<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
									</dcsset:item>
								</dcsset:groupItems>
								<dcsset:order>
									<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
								</dcsset:order>
								<dcsset:selection>
									<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
								</dcsset:selection>
								<dcsset:item>
									<dcsset:groupItems>
										<dcsset:item xsi:type="dcsset:GroupItemField">
											<dcsset:field>ВидЗатрат</dcsset:field>
											<dcsset:groupType>Items</dcsset:groupType>
											<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
											<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
											<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
										</dcsset:item>
									</dcsset:groupItems>
									<dcsset:order>
										<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
									</dcsset:order>
									<dcsset:selection>
										<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
									</dcsset:selection>
									<dcsset:item>
										<dcsset:groupItems>
											<dcsset:item xsi:type="dcsset:GroupItemField">
												<dcsset:field>Номенклатура</dcsset:field>
												<dcsset:groupType>Items</dcsset:groupType>
												<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
												<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
												<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
											</dcsset:item>
											<dcsset:item xsi:type="dcsset:GroupItemField">
												<dcsset:field>ХарактеристикаНоменклатуры</dcsset:field>
												<dcsset:groupType>Items</dcsset:groupType>
												<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
												<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
												<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
											</dcsset:item>
											<dcsset:item xsi:type="dcsset:GroupItemField">
												<dcsset:field>ЕдиницаИзмерения</dcsset:field>
												<dcsset:groupType>Items</dcsset:groupType>
												<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
												<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
												<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
											</dcsset:item>
										</dcsset:groupItems>
										<dcsset:order>
											<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
										</dcsset:order>
										<dcsset:selection>
											<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
										</dcsset:selection>
									</dcsset:item>
								</dcsset:item>
							</dcsset:item>
						</dcsset:item>
					</dcsset:item>
				</dcsset:row>
				<dcsset:outputParameters>
					<dcscor:item xsi:type="dcsset:SettingsParameterValue">
						<dcscor:use>false</dcscor:use>
						<dcscor:parameter>Заголовок</dcscor:parameter>
						<dcscor:value xsi:type="v8:LocalStringType"/>
					</dcscor:item>
				</dcsset:outputParameters>
			</dcsset:item>
			<dcsset:item xsi:type="dcsset:StructureItemGroup">
				<dcsset:groupItems>
					<dcsset:item xsi:type="dcsset:GroupItemField">
						<dcsset:field>ЕдиницаИзмерения</dcsset:field>
						<dcsset:groupType>Items</dcsset:groupType>
						<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
						<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
						<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
					</dcsset:item>
				</dcsset:groupItems>
				<dcsset:order>
					<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
				</dcsset:order>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ЕдиницаИзмерения</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ПлановоеКоличествоНоменклатураИтог</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ФактическоеКоличествоНоменклатураИтог</dcsset:field>
					</dcsset:item>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ОтклонениеКоличествоНоменклатураИтог</dcsset:field>
					</dcsset:item>
				</dcsset:selection>
			</dcsset:item>
			<dcsset:item xsi:type="dcsset:StructureItemChart">
				<dcsset:use>false</dcsset:use>
				<dcsset:point>
					<dcsset:groupItems>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>ОбъектРемонтаНоменклатура</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
						<dcsset:item xsi:type="dcsset:GroupItemField">
							<dcsset:field>Номенклатура</dcsset:field>
							<dcsset:groupType>Items</dcsset:groupType>
							<dcsset:periodAdditionType>None</dcsset:periodAdditionType>
							<dcsset:periodAdditionBegin xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionBegin>
							<dcsset:periodAdditionEnd xsi:type="xs:dateTime">0001-01-01T00:00:00</dcsset:periodAdditionEnd>
						</dcsset:item>
					</dcsset:groupItems>
					<dcsset:order>
						<dcsset:item xsi:type="dcsset:OrderItemAuto"/>
					</dcsset:order>
					<dcsset:selection>
						<dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
					</dcsset:selection>
				</dcsset:point>
				<dcsset:selection>
					<dcsset:item xsi:type="dcsset:SelectedItemField">
						<dcsset:field>ОтклонениеСуммаНоменклатура</dcsset:field>
					</dcsset:item>
				</dcsset:selection>
				<dcsset:conditionalAppearance>
					<dcsset:item>
						<dcsset:selection/>
						<dcsset:filter/>
						<dcsset:appearance/>
					</dcsset:item>
				</dcsset:conditionalAppearance>
				<dcsset:outputParameters>
					<dcscor:item xsi:type="dcsset:SettingsParameterValue">
						<dcscor:parameter>ТипДиаграммы</dcscor:parameter>
						<dcscor:value xsi:type="v8ui:ChartType">Column</dcscor:value>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ТипДиаграммы.БазовоеЗначение</dcscor:parameter>
							<dcscor:value xsi:type="xs:decimal">0</dcscor:value>
						</dcscor:item>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ТипДиаграммы.ПропускатьБазовоеЗначение</dcscor:parameter>
							<dcscor:value xsi:type="xs:boolean">true</dcscor:value>
						</dcscor:item>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ТипДиаграммы.Окантовка</dcscor:parameter>
							<dcscor:value xsi:type="xs:boolean">true</dcscor:value>
						</dcscor:item>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ТипДиаграммы.Градиент</dcscor:parameter>
							<dcscor:value xsi:type="xs:boolean">true</dcscor:value>
						</dcscor:item>
						<dcscor:item xsi:type="dcsset:SettingsParameterValue">
							<dcscor:parameter>ТипДиаграммы.РасположениеЛегенды</dcscor:parameter>
							<dcscor:value xsi:type="dcsset:DataCompositionChartLegendPlacement">None</dcscor:value>
						</dcscor:item>
					</dcscor:item>
				</dcsset:outputParameters>
			</dcsset:item>
		</dcsset:settings>
	</settingsVariant>
</DataCompositionSchema>